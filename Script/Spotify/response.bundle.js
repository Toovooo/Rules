console.log("\uD83C\uDF7F️ DualSubs: \uD83C\uDFB5 Spotify"),console.log("response.bundle.js"),console.log("Version: 1.9.8"),console.log("Date: 2024/12/5 15:48:28"),(()=>{"use strict";let e,t,n,r,a,s;var i,o,l,u,c,d,h,f,p,m={},g={};function _(e){var t=g[e];if(void 0!==t)return t.exports;var n=g[e]={exports:{}};return m[e](n,n.exports,_),n.exports}_.rv=function(){return"1.1.5"},_.ruid="bundler=rspack@1.1.5";let b=(()=>{let e=Object.keys(globalThis);switch(!0){case e.includes("$task"):return"Quantumult X";case e.includes("$loon"):return"Loon";case e.includes("$rocket"):return"Shadowrocket";case"undefined"!=typeof module:return"Node.js";case e.includes("Egern"):return"Egern";case e.includes("$environment"):if($environment["surge-version"])return"Surge";if($environment["stash-version"])return"Stash";return;default:return}})();class w{static #e=new Map([]);static #t=[];static #n=new Map([]);static clear=()=>{};static count=(e="default")=>{switch(w.#e.has(e)){case!0:w.#e.set(e,w.#e.get(e)+1);break;case!1:w.#e.set(e,0)}w.log(`${e}: ${w.#e.get(e)}`)};static countReset=(e="default")=>{switch(w.#e.has(e)){case!0:w.#e.set(e,0),w.log(`${e}: ${w.#e.get(e)}`);break;case!1:w.warn(`Counter "${e}" doesn’t exist`)}};static debug=(...e)=>{!(w.#r<4)&&(e=e.map(e=>`🅱️ ${e}`),w.log(...e))};static error(...e){if(!(w.#r<1)){switch(b){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Quantumult X":default:e=e.map(e=>`❌ ${e}`);break;case"Node.js":e=e.map(e=>`❌ ${e.stack}`)}w.log(...e)}}static exception=(...e)=>w.error(...e);static group=e=>w.#t.unshift(e);static groupEnd=()=>w.#t.shift();static info(...e){!(w.#r<3)&&(e=e.map(e=>`ℹ️ ${e}`),w.log(...e))}static #r=2;static get logLevel(){switch(w.#r){case 0:return"OFF";case 1:return"ERROR";case 2:default:return"WARN";case 3:return"INFO";case 4:return"DEBUG";case 5:return"ALL"}}static set logLevel(e){switch(typeof e){case"string":e=e.toLowerCase();break;case"number":break;default:e="warn"}switch(e){case 0:case"off":w.#r=0;break;case 1:case"error":w.#r=1;break;case 2:case"warn":case"warning":default:w.#r=2;break;case 3:case"info":w.#r=3;break;case 4:case"debug":w.#r=4;break;case 5:case"all":w.#r=5}}static log=(...e)=>{0!==w.#r&&(e=e.map(e=>{switch(typeof e){case"object":e=JSON.stringify(e);break;case"bigint":case"number":case"boolean":case"string":e=e.toString()}return e}),w.#t.forEach(t=>{(e=e.map(e=>`  ${e}`)).unshift(`▼ ${t}:`)}),console.log((e=["",...e]).join("\n")))};static time=(e="default")=>w.#n.set(e,Date.now());static timeEnd=(e="default")=>w.#n.delete(e);static timeLog=(e="default")=>{let t=w.#n.get(e);t?w.log(`${e}: ${Date.now()-t}ms`):w.warn(`Timer "${e}" doesn’t exist`)};static warn(...e){!(w.#r<2)&&(e=e.map(e=>`⚠️ ${e}`),w.log(...e))}}class y{static get(e={},t="",n){!Array.isArray(t)&&(t=y.toPath(t));let r=t.reduce((e,t)=>Object(e)[t],e);return void 0===r?n:r}static set(e,t,n){return!Array.isArray(t)&&(t=y.toPath(t)),t.slice(0,-1).reduce((e,n,r)=>Object(e[n])===e[n]?e[n]:e[n]=/^\d+$/.test(t[r+1])?[]:{},e)[t[t.length-1]]=n,e}static unset(e={},t=""){return!Array.isArray(t)&&(t=y.toPath(t)),t.reduce((e,n,r)=>r===t.length-1?(delete e[n],!0):Object(e)[n],e)}static toPath(e){return e.replace(/\[(\d+)\]/g,".$1").split(".").filter(Boolean)}static escape(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}static unescape(e){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,e=>t[e])}}let T={100:"HTTP/1.1 100 Continue",101:"HTTP/1.1 101 Switching Protocols",102:"HTTP/1.1 102 Processing",103:"HTTP/1.1 103 Early Hints",200:"HTTP/1.1 200 OK",201:"HTTP/1.1 201 Created",202:"HTTP/1.1 202 Accepted",203:"HTTP/1.1 203 Non-Authoritative Information",204:"HTTP/1.1 204 No Content",205:"HTTP/1.1 205 Reset Content",206:"HTTP/1.1 206 Partial Content",207:"HTTP/1.1 207 Multi-Status",208:"HTTP/1.1 208 Already Reported",226:"HTTP/1.1 226 IM Used",300:"HTTP/1.1 300 Multiple Choices",301:"HTTP/1.1 301 Moved Permanently",302:"HTTP/1.1 302 Found",304:"HTTP/1.1 304 Not Modified",307:"HTTP/1.1 307 Temporary Redirect",308:"HTTP/1.1 308 Permanent Redirect",400:"HTTP/1.1 400 Bad Request",401:"HTTP/1.1 401 Unauthorized",402:"HTTP/1.1 402 Payment Required",403:"HTTP/1.1 403 Forbidden",404:"HTTP/1.1 404 Not Found",405:"HTTP/1.1 405 Method Not Allowed",406:"HTTP/1.1 406 Not Acceptable",407:"HTTP/1.1 407 Proxy Authentication Required",408:"HTTP/1.1 408 Request Timeout",409:"HTTP/1.1 409 Conflict",410:"HTTP/1.1 410 Gone",411:"HTTP/1.1 411 Length Required",412:"HTTP/1.1 412 Precondition Failed",413:"HTTP/1.1 413 Content Too Large",414:"HTTP/1.1 414 URI Too Long",415:"HTTP/1.1 415 Unsupported Media Type",416:"HTTP/1.1 416 Range Not Satisfiable",417:"HTTP/1.1 417 Expectation Failed",418:"HTTP/1.1 418 I'm a teapot",421:"HTTP/1.1 421 Misdirected Request",422:"HTTP/1.1 422 Unprocessable Entity",423:"HTTP/1.1 423 Locked",424:"HTTP/1.1 424 Failed Dependency",425:"HTTP/1.1 425 Too Early",426:"HTTP/1.1 426 Upgrade Required",428:"HTTP/1.1 428 Precondition Required",429:"HTTP/1.1 429 Too Many Requests",431:"HTTP/1.1 431 Request Header Fields Too Large",451:"HTTP/1.1 451 Unavailable For Legal Reasons",500:"HTTP/1.1 500 Internal Server Error",501:"HTTP/1.1 501 Not Implemented",502:"HTTP/1.1 502 Bad Gateway",503:"HTTP/1.1 503 Service Unavailable",504:"HTTP/1.1 504 Gateway Timeout",505:"HTTP/1.1 505 HTTP Version Not Supported",506:"HTTP/1.1 506 Variant Also Negotiates",507:"HTTP/1.1 507 Insufficient Storage",508:"HTTP/1.1 508 Loop Detected",510:"HTTP/1.1 510 Not Extended",511:"HTTP/1.1 511 Network Authentication Required"},k=e=>{let t={};switch(typeof e){case void 0:break;case"string":case"number":case"boolean":switch($app){case"Surge":case"Stash":case"Egern":default:t.url=e;break;case"Loon":case"Shadowrocket":t.openUrl=e;break;case"Quantumult X":t["open-url"]=e;case"Node.js":}break;case"object":{let n=e.open||e["open-url"]||e.url||e.openUrl,r=e.copy||e["update-pasteboard"]||e.updatePasteboard,a=e.media||e["media-url"]||e.mediaUrl;switch($app){case"Surge":case"Stash":case"Egern":case"Shadowrocket":default:if(n&&(t.action="open-url",t.url=n),r&&(t.action="clipboard",t.text=r),a)switch(!0){case a.startsWith("http"):t["media-url"]=a;break;case a.startsWith("data:"):{let{MIME:n,Base64:r}=a.match(/^data:(?<MIME>\w+\/\w+);base64,(?<Base64>.+)/).groups;t["media-base64"]=r,t["media-base64-mime"]=e.mime||n;break}default:switch(t["media-base64"]=a,!0){case a.startsWith("CiVQREYt"):case a.startsWith("JVBERi0"):t["media-base64-mime"]="application/pdf";break;case a.startsWith("R0lGODdh"):case a.startsWith("R0lGODlh"):t["media-base64-mime"]="image/gif";break;case a.startsWith("iVBORw0KGgo"):t["media-base64-mime"]="image/png";break;case a.startsWith("/9j/"):t["media-base64-mime"]="image/jpg";break;case a.startsWith("Qk02U"):t["media-base64-mime"]="image/bmp"}}e["auto-dismiss"]&&(t["auto-dismiss"]=e["auto-dismiss"]),e.sound&&(t.sound=e.sound);break;case"Loon":n&&(t.openUrl=n),a?.startsWith("http")&&(t.mediaUrl=a);break;case"Quantumult X":n&&(t["open-url"]=n),a?.startsWith("http")&&(t["media-url"]=a),r&&(t["update-pasteboard"]=r);case"Node.js":}break}default:Console.error(`不支持的通知参数类型: ${typeof e}`,"")}return t};class S{static data=null;static dataFile="box.dat";static #a=/^@(?<key>[^.]+)(?:\.(?<path>.*))?$/;static getItem(e,t=null){let n=t;if(!0===e.startsWith("@")){let{key:t,path:r}=e.match(S.#a)?.groups;e=t;let a=S.getItem(e,{});"object"!=typeof a&&(a={}),n=y.get(a,r);try{n=JSON.parse(n)}catch(e){}}else{switch(b){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":n=$persistentStore.read(e);break;case"Quantumult X":n=$prefs.valueForKey(e);break;case"Node.js":S.data=S.#s(S.dataFile),n=S.data?.[e];break;default:n=S.data?.[e]||null}try{n=JSON.parse(n)}catch(e){}}return n??t}static setItem(e=new String,t=new String){let n=!1;if("object"==typeof t)t=JSON.stringify(t);else t=String(t);if(!0===e.startsWith("@")){let{key:r,path:a}=e.match(S.#a)?.groups;e=r;let s=S.getItem(e,{});"object"!=typeof s&&(s={}),y.set(s,a,t),n=S.setItem(e,s)}else switch(b){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":n=$persistentStore.write(t,e);break;case"Quantumult X":n=$prefs.setValueForKey(t,e);break;case"Node.js":S.data=S.#s(S.dataFile),S.data[e]=t,S.#i(S.dataFile),n=!0;break;default:n=S.data?.[e]||null}return n}static removeItem(e){let t=!1;if(!0===e.startsWith("@")){let{key:n,path:r}=e.match(S.#a)?.groups;e=n;let a=S.getItem(e);"object"!=typeof a&&(a={}),keyValue=y.unset(a,r),t=S.setItem(e,a)}else switch(b){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":t=!1;break;case"Quantumult X":t=$prefs.removeValueForKey(e);break;default:t=!1}return t}static clear(){let e=!1;switch(b){case"Surge":case"Loon":case"Stash":case"Egern":case"Shadowrocket":case"Node.js":e=!1;break;case"Quantumult X":e=$prefs.removeAllValues();break;default:e=!1}return e}static #s=e=>{if("Node.js"!==b)return{};{this.fs=this.fs?this.fs:require("node:fs"),this.path=this.path?this.path:require("node:path");let t=this.path.resolve(e),n=this.path.resolve(process.cwd(),e),r=this.fs.existsSync(t),a=!r&&this.fs.existsSync(n);if(!r&&!a)return{};try{return JSON.parse(this.fs.readFileSync(r?t:n))}catch(e){return{}}}};static #i=(e=this.dataFile)=>{if("Node.js"===b){this.fs=this.fs?this.fs:require("node:fs"),this.path=this.path?this.path:require("node:path");let t=this.path.resolve(e),n=this.path.resolve(process.cwd(),e),r=this.fs.existsSync(t),a=!r&&this.fs.existsSync(n),s=JSON.stringify(this.data);r?this.fs.writeFileSync(t,s):a?this.fs.writeFileSync(n,s):this.fs.writeFileSync(t,s)}}}function E(e){let t=e.length;for(;--t>=0;)e[t]=0}let I=286,v=2*I+1,N=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),A=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),O=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),x=Array((I+2)*2);E(x);let D=Array(60);E(D);let U=Array(512);E(U);let C=Array(256);E(C);let P=Array(29);E(P);let B=Array(30);function L(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function V(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}E(B);let F=e=>e<256?U[e]:U[256+(e>>>7)],z=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},$=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,z(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},H=(e,t,n)=>{$(e,n[2*t],n[2*t+1])},K=(e,t)=>{let n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1},j=e=>{16===e.bi_valid?(z(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},M=(e,t)=>{let n,r,a,s,i,o;let l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(s=0;s<=15;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<v;n++){if((s=l[2*l[2*(r=e.heap[n])+1]+1]+1)>p&&(s=p,m++),l[2*r+1]=s,!(r>u))e.bl_count[s]++,i=0,r>=f&&(i=h[r-f]),o=l[2*r],e.opt_len+=o*(s+i),d&&(e.static_len+=o*(c[2*r+1]+i))}if(0!==m){do{for(s=p-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[p]--,m-=2}while(m>0);for(s=p;0!==s;s--)for(r=e.bl_count[s];0!==r;){if(!((a=e.heap[--n])>u))l[2*a+1]!==s&&(e.opt_len+=(s-l[2*a+1])*l[2*a],l[2*a+1]=s),r--}}},W=(e,t,n)=>{let r,a;let s=Array(16),i=0;for(r=1;r<=15;r++)i=i+n[r-1]<<1,s[r]=i;for(a=0;a<=t;a++){let t=e[2*a+1];if(0!==t)e[2*a]=K(s[t]++,t)}},G=()=>{let r,a,s,i,o;let l=Array(16);for(i=0,s=0;i<28;i++)for(r=0,P[i]=s;r<1<<N[i];r++)C[s++]=i;for(C[s-1]=i,o=0,i=0;i<16;i++)for(r=0,B[i]=o;r<1<<A[i];r++)U[o++]=i;for(o>>=7;i<30;i++)for(r=0,B[i]=o<<7;r<1<<A[i]-7;r++)U[256+o++]=i;for(a=0;a<=15;a++)l[a]=0;for(r=0;r<=143;)x[2*r+1]=8,r++,l[8]++;for(;r<=255;)x[2*r+1]=9,r++,l[9]++;for(;r<=279;)x[2*r+1]=7,r++,l[7]++;for(;r<=287;)x[2*r+1]=8,r++,l[8]++;for(W(x,I+1,l),r=0;r<30;r++)D[2*r+1]=5,D[2*r]=K(r,5);e=new L(x,N,257,I,15),t=new L(D,A,0,30,15),n=new L([],O,0,19,7)},Z=e=>{let t;for(t=0;t<I;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},X=e=>{e.bi_valid>8?z(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Y=(e,t,n,r)=>{let a=2*t,s=2*n;return e[a]<e[s]||e[a]===e[s]&&r[t]<=r[n]},J=(e,t,n)=>{let r=e.heap[n],a=n<<1;for(;a<=e.heap_len&&(a<e.heap_len&&Y(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!Y(t,r,e.heap[a],e.depth));){;e.heap[n]=e.heap[a],n=a,a<<=1}e.heap[n]=r},q=(e,t,n)=>{let r,a,s,i;let o=0;if(0!==e.sym_next)do r=(255&e.pending_buf[e.sym_buf+o++])+((255&e.pending_buf[e.sym_buf+o++])<<8),a=e.pending_buf[e.sym_buf+o++],0===r?H(e,a,t):(H(e,(s=C[a])+256+1,t),0!==(i=N[s])&&$(e,a-=P[s],i),H(e,s=F(--r),n),0!==(i=A[s])&&$(e,r-=B[s],i));while(o<e.sym_next);H(e,256,t)},Q=(e,t)=>{let n,r,a;let s=t.dyn_tree,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(n=0,e.heap_len=0,e.heap_max=v;n<l;n++)0!==s[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=i[2*a+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)J(e,s,n);a=l;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],J(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,s[2*a]=s[2*n]+s[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,s[2*n+1]=s[2*r+1]=a,e.heap[1]=a++,J(e,s,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],M(e,t),W(s,u,e.bl_count)},ee=(e,t,n)=>{let r,a;let s=-1,i=t[1],o=0,l=7,u=4;for(0===i&&(l=138,u=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++){if(a=i,i=t[(r+1)*2+1],!(++o<l)||a!==i){o<u?e.bl_tree[2*a]+=o:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++;o=0,s=a,0===i?(l=138,u=3):a===i?(l=6,u=3):(l=7,u=4)}}},et=(e,t,n)=>{let r,a;let s=-1,i=t[1],o=0,l=7,u=4;for(0===i&&(l=138,u=3),r=0;r<=n;r++){if(a=i,i=t[(r+1)*2+1],!(++o<l)||a!==i){if(o<u)do H(e,a,e.bl_tree);while(0!=--o);else 0!==a?(a!==s&&(H(e,a,e.bl_tree),o--),H(e,16,e.bl_tree),$(e,o-3,2)):o<=10?(H(e,17,e.bl_tree),$(e,o-3,3)):(H(e,18,e.bl_tree),$(e,o-11,7));o=0,s=a,0===i?(l=138,u=3):a===i?(l=6,u=3):(l=7,u=4)}}},en=e=>{let t;for(ee(e,e.dyn_ltree,e.l_desc.max_code),ee(e,e.dyn_dtree,e.d_desc.max_code),Q(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*R[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},er=(e,t,n,r)=>{let a;for($(e,t-257,5),$(e,n-1,5),$(e,r-4,4),a=0;a<r;a++)$(e,e.bl_tree[2*R[a]+1],3);et(e,e.dyn_ltree,t-1),et(e,e.dyn_dtree,n-1)},ea=e=>{let t,n=0xf3ffc07f;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0},es=!1,ei=(e,t,n,r)=>{$(e,0+(r?1:0),3),X(e),z(e,n),z(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var eo={_tr_init:r=>{!es&&(G(),es=!0),r.l_desc=new V(r.dyn_ltree,e),r.d_desc=new V(r.dyn_dtree,t),r.bl_desc=new V(r.bl_tree,n),r.bi_buf=0,r.bi_valid=0,Z(r)},_tr_stored_block:ei,_tr_flush_block:(e,t,n,r)=>{let a,s;let i=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=ea(e)),Q(e,e.l_desc),Q(e,e.d_desc),i=en(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?ei(e,t,n,r):4===e.strategy||s===a?($(e,2+(r?1:0),3),q(e,x,D)):($(e,4+(r?1:0),3),er(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),q(e,e.dyn_ltree,e.dyn_dtree)),Z(e),r&&X(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[(C[n]+256+1)*2]++,e.dyn_dtree[2*F(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{$(e,2,3),H(e,256,x),j(e)}},el=(e,t,n,r)=>{let a=65535&e|0,s=e>>>16&65535|0,i=0;for(;0!==n;){i=n>2e3?2e3:n,n-=i;do s=s+(a=a+t[r++]|0)|0;while(--i);a%=65521,s%=65521}return a|s<<16|0};let eu=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?0xedb88320^e>>>1:e>>>1;t[n]=e}return t})());var ec=(e,t,n,r)=>{let a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^eu[(e^t[n])&255];return -1^e},ed={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},eh={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:ef,_tr_stored_block:ep,_tr_flush_block:em,_tr_tally:eg,_tr_align:e_}=eo,{Z_NO_FLUSH:eb,Z_PARTIAL_FLUSH:ew,Z_FULL_FLUSH:ey,Z_FINISH:eT,Z_BLOCK:ek,Z_OK:eS,Z_STREAM_END:eE,Z_STREAM_ERROR:eI,Z_DATA_ERROR:ev,Z_BUF_ERROR:eN,Z_DEFAULT_COMPRESSION:eA,Z_FILTERED:eO,Z_HUFFMAN_ONLY:eR,Z_RLE:ex,Z_FIXED:eD,Z_DEFAULT_STRATEGY:eU,Z_UNKNOWN:eC,Z_DEFLATED:eP}=eh,eB=286,eL=2*eB+1,eV=262,eF=(e,t)=>(e.msg=ed[t],t),ez=e=>2*e-(e>4?9:0),e$=e=>{let t=e.length;for(;--t>=0;)e[t]=0},eH=e=>{let t,n,r;let a=e.w_size;r=t=e.hash_size;do n=e.head[--r],e.head[r]=n>=a?n-a:0;while(--t);r=t=a;do n=e.prev[--r],e.prev[r]=n>=a?n-a:0;while(--t)},eK=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ej=e=>{let t=e.state,n=t.pending;if(n>e.avail_out&&(n=e.avail_out),0!==n)e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0)},eM=(e,t)=>{em(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ej(e.strm)},eW=(e,t)=>{e.pending_buf[e.pending++]=t},eG=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},eZ=(e,t,n,r)=>{let a=e.avail_in;return(a>r&&(a=r),0===a)?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=el(e.adler,t,a,n):2===e.state.wrap&&(e.adler=ec(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},eX=(e,t)=>{let n,r,a=e.max_chain_length,s=e.strstart,i=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-eV?e.strstart-(e.w_size-eV):0,u=e.window,c=e.w_mask,d=e.prev,h=e.strstart+258,f=u[s+i-1],p=u[s+i];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(u[(n=t)+i]!==p||u[n+i-1]!==f||u[n]!==u[s]||u[++n]!==u[s+1])continue;s+=2,n++;do;while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&s<h);if(r=258-(h-s),s=h-258,r>i){if(e.match_start=t,i=r,r>=o)break;f=u[s+i-1],p=u[s+i]}}while((t=d[t&c])>l&&0!=--a);return i<=e.lookahead?i:e.lookahead},eY=e=>{let t,n,r;let a=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-eV)&&(e.window.set(e.window.subarray(a,a+a-n),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),eH(e),n+=a),0===e.strm.avail_in)break;if(t=eZ(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=eK(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=eK(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<eV&&0!==e.strm.avail_in)},eJ=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,a,s,i=0,o=e.strm.avail_in;do{if(r=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s)break;if(s=e.strm.avail_out-s,r>(a=e.strstart-e.block_start)+e.strm.avail_in&&(r=a+e.strm.avail_in),r>s&&(r=s),r<n&&(0===r&&t!==eT||t===eb||r!==a+e.strm.avail_in))break;i=t===eT&&r===a+e.strm.avail_in?1:0,ep(e,0,0,i),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,ej(e.strm),a&&(a>r&&(a=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,r-=a),r&&(eZ(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===i);return((o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i)?4:t!==eb&&t!==eT&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(eZ(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,n=(s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s)>e.w_size?e.w_size:s,((a=e.strstart-e.block_start)>=n||(a||t===eT)&&t!==eb&&0===e.strm.avail_in&&a<=s)&&(r=a>s?s:a,i=t===eT&&0===e.strm.avail_in&&r===a?1:0,ep(e,e.block_start,r,i),e.block_start+=r,ej(e.strm)),i?3:1)},eq=(e,t)=>{let n,r;for(;;){if(e.lookahead<eV){if(eY(e),e.lookahead<eV&&t===eb)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=eK(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-eV&&(e.match_length=eX(e,n)),e.match_length>=3){if(r=eg(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=eK(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=eK(e,e.ins_h,e.window[e.strstart+1])}else r=eg(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(eM(e,!1),0===e.strm.avail_out))return 1}if(e.insert=e.strstart<2?e.strstart:2,t===eT)return(eM(e,!0),0===e.strm.avail_out)?3:4;return e.sym_next&&(eM(e,!1),0===e.strm.avail_out)?1:2},eQ=(e,t)=>{let n,r,a;for(;;){if(e.lookahead<eV){if(eY(e),e.lookahead<eV&&t===eb)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=eK(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-eV&&(e.match_length=eX(e,n),e.match_length<=5&&(e.strategy===eO||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=eg(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=eK(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(eM(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=eg(e,0,e.window[e.strstart-1]))&&eM(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}if(e.match_available&&(r=eg(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===eT)return(eM(e,!0),0===e.strm.avail_out)?3:4;return e.sym_next&&(eM(e,!1),0===e.strm.avail_out)?1:2},e0=(e,t)=>{let n,r,a,s;let i=e.window;for(;;){if(e.lookahead<=258){if(eY(e),e.lookahead<=258&&t===eb)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=i[a=e.strstart-1])===i[++a]&&r===i[++a]&&r===i[++a]){s=e.strstart+258;do;while(r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&a<s);e.match_length=258-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=eg(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=eg(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(eM(e,!1),0===e.strm.avail_out))return 1}if(e.insert=0,t===eT)return(eM(e,!0),0===e.strm.avail_out)?3:4;return e.sym_next&&(eM(e,!1),0===e.strm.avail_out)?1:2},e1=(e,t)=>{let n;for(;;){if(0===e.lookahead&&(eY(e),0===e.lookahead)){if(t===eb)return 1;break}if(e.match_length=0,n=eg(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(eM(e,!1),0===e.strm.avail_out))return 1}if(e.insert=0,t===eT)return(eM(e,!0),0===e.strm.avail_out)?3:4;return e.sym_next&&(eM(e,!1),0===e.strm.avail_out)?1:2};function e2(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}let e3=[new e2(0,0,0,0,eJ),new e2(4,4,8,4,eq),new e2(4,5,16,8,eq),new e2(4,6,32,32,eq),new e2(4,4,16,16,eQ),new e2(8,16,32,32,eQ),new e2(8,16,128,128,eQ),new e2(8,32,128,256,eQ),new e2(32,128,258,1024,eQ),new e2(32,258,258,4096,eQ)],e6=e=>{e.window_size=2*e.w_size,e$(e.head),e.max_lazy_match=e3[e.level].max_lazy,e.good_match=e3[e.level].good_length,e.nice_match=e3[e.level].nice_length,e.max_chain_length=e3[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0};function e5(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=eP,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*eL),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),e$(this.dyn_ltree),e$(this.dyn_dtree),e$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(2*eB+1),e$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*eB+1),e$(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let e4=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1},e8=e=>{if(e4(e))return eF(e,eI);e.total_in=e.total_out=0,e.data_type=eC;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,ef(t),eS},e9=e=>{let t=e8(e);return t===eS&&e6(e.state),t},e7=(e,t,n,r,a,s)=>{if(!e)return eI;let i=1;if(t===eA&&(t=6),r<0?(i=0,r=-r):r>15&&(i=2,r-=16),a<1||a>9||n!==eP||r<8||r>15||t<0||t>9||s<0||s>eD||8===r&&1!==i)return eF(e,eI);8===r&&(r=9);let o=new e5;return e.state=o,o.strm=e,o.status=42,o.wrap=i,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=s,o.method=n,e9(e)};var te={deflateInit2:e7,deflateSetHeader:(e,t)=>e4(e)||2!==e.state.wrap?eI:(e.state.gzhead=t,eS),deflate:(e,t)=>{if(e4(e)||t>ek||t<0)return e?eF(e,eI):eI;let n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==eT)return eF(e,0===e.avail_out?eN:eI);let r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(ej(e),0===e.avail_out)return n.last_flush=-1,eS}else if(0===e.avail_in&&ez(t)<=ez(r)&&t!==eT)return eF(e,eN);if(666===n.status&&0!==e.avail_in)return eF(e,eN);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=eP+(n.w_bits-8<<4)<<8,r=-1;if(t|=(r=n.strategy>=eR||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(t|=32),eG(n,t+=31-t%31),0!==n.strstart&&(eG(n,e.adler>>>16),eG(n,65535&e.adler)),e.adler=1,n.status=113,ej(e),0!==n.pending)return n.last_flush=-1,eS}if(57===n.status){if(e.adler=0,eW(n,31),eW(n,139),eW(n,8),n.gzhead)eW(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),eW(n,255&n.gzhead.time),eW(n,n.gzhead.time>>8&255),eW(n,n.gzhead.time>>16&255),eW(n,n.gzhead.time>>24&255),eW(n,9===n.level?2:n.strategy>=eR||n.level<2?4:0),eW(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(eW(n,255&n.gzhead.extra.length),eW(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ec(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(eW(n,0),eW(n,0),eW(n,0),eW(n,0),eW(n,0),eW(n,9===n.level?2:n.strategy>=eR||n.level<2?4:0),eW(n,3),n.status=113,ej(e),0!==n.pending)return n.last_flush=-1,eS}if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=ec(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=a,ej(e),0!==n.pending)return n.last_flush=-1,eS;t=0,r-=a}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=ec(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=ec(e.adler,n.pending_buf,n.pending-r,r)),ej(e),0!==n.pending)return n.last_flush=-1,eS;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,eW(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=ec(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=ec(e.adler,n.pending_buf,n.pending-r,r)),ej(e),0!==n.pending)return n.last_flush=-1,eS;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,eW(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=ec(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ej(e),0!==n.pending))return n.last_flush=-1,eS;eW(n,255&e.adler),eW(n,e.adler>>8&255),e.adler=0}if(n.status=113,ej(e),0!==n.pending)return n.last_flush=-1,eS}if(0!==e.avail_in||0!==n.lookahead||t!==eb&&666!==n.status){let r=0===n.level?eJ(n,t):n.strategy===eR?e1(n,t):n.strategy===ex?e0(n,t):e3[n.level].func(n,t);if((3===r||4===r)&&(n.status=666),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),eS;if(2===r&&(t===ew?e_(n):t!==ek&&(ep(n,0,0,!1),t===ey&&(e$(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ej(e),0===e.avail_out))return n.last_flush=-1,eS}return t!==eT?eS:n.wrap<=0?eE:(2===n.wrap?(eW(n,255&e.adler),eW(n,e.adler>>8&255),eW(n,e.adler>>16&255),eW(n,e.adler>>24&255),eW(n,255&e.total_in),eW(n,e.total_in>>8&255),eW(n,e.total_in>>16&255),eW(n,e.total_in>>24&255)):(eG(n,e.adler>>>16),eG(n,65535&e.adler)),ej(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?eS:eE)},deflateEnd:e=>{if(e4(e))return eI;let t=e.state.status;return e.state=null,113===t?eF(e,ev):eS},deflateSetDictionary:(e,t)=>{let n=t.length;if(e4(e))return eI;let r=e.state,a=r.wrap;if(2===a||1===a&&42!==r.status||r.lookahead)return eI;if(1===a&&(e.adler=el(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(e$(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}let s=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,eY(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do r.ins_h=eK(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++;while(--t);r.strstart=e,r.lookahead=2,eY(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=i,e.input=o,e.avail_in=s,r.wrap=a,eS}};let tt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var tn={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(!!n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let t in n)tt(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;let n=new Uint8Array(t);for(let t=0,r=0,a=e.length;t<a;t++){let a=e[t];n.set(a,r),r+=a.length}return n}};let tr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){tr=!1}let ta=new Uint8Array(256);for(let e=0;e<256;e++)ta[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ta[254]=ta[254]=1;let ts=(e,t)=>{if(t<65534&&e.subarray&&tr)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var ti={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,a,s,i=e.length,o=0;for(a=0;a<i;a++)(64512&(n=e.charCodeAt(a)))==55296&&a+1<i&&(64512&(r=e.charCodeAt(a+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),a++),o+=n<128?1:n<2048?2:n<65536?3:4;for(s=0,t=new Uint8Array(o),a=0;s<o;a++)(64512&(n=e.charCodeAt(a)))==55296&&a+1<i&&(64512&(r=e.charCodeAt(a+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t},buf2string:(e,t)=>{let n,r;let a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let s=Array(2*a);for(r=0,n=0;n<a;){let t=e[n++];if(t<128){s[r++]=t;continue}let i=ta[t];if(i>4){s[r++]=65533,n+=i-1;continue}for(t&=2===i?31:3===i?15:7;i>1&&n<a;)t=t<<6|63&e[n++],i--;if(i>1){s[r++]=65533;continue}t<65536?s[r++]=t:(t-=65536,s[r++]=55296|t>>10&1023,s[r++]=56320|1023&t)}return ts(s,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(192&e[n])==128;)n--;return n<0||0===n?t:n+ta[e[n]]>t?n:t}},to=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let tl=Object.prototype.toString,{Z_NO_FLUSH:tu,Z_SYNC_FLUSH:tc,Z_FULL_FLUSH:td,Z_FINISH:th,Z_OK:tf,Z_STREAM_END:tp,Z_DEFAULT_COMPRESSION:tm,Z_DEFAULT_STRATEGY:tg,Z_DEFLATED:t_}=eh;function tb(e){this.options=tn.assign({level:tm,method:t_,chunkSize:16384,windowBits:15,memLevel:8,strategy:tg},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new to,this.strm.avail_out=0;let n=te.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==tf)throw Error(ed[n]);if(t.header&&te.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?ti.string2buf(t.dictionary):"[object ArrayBuffer]"===tl.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=te.deflateSetDictionary(this.strm,e))!==tf)throw Error(ed[n]);this._dict_set=!0}}function tw(e,t){let n=new tb(t);if(n.push(e,!0),n.err)throw n.msg||ed[n.err];return n.result}tb.prototype.push=function(e,t){let n,r;let a=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?th:tu,"string"==typeof e?a.input=ti.string2buf(e):"[object ArrayBuffer]"===tl.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){if(0===a.avail_out&&(a.output=new Uint8Array(s),a.next_out=0,a.avail_out=s),(r===tc||r===td)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if((n=te.deflate(a,r))===tp)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=te.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===tf;if(0===a.avail_out){this.onData(a.output);continue}if(r>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(0===a.avail_in)break}return!0},tb.prototype.onData=function(e){this.chunks.push(e)},tb.prototype.onEnd=function(e){e===tf&&(this.result=tn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ty=function(e,t){let n,r,a,s,i,o,l,u,c,d,h,f,p,m,g,_,b,w,y,T,k,S,E,I;let v=e.state;n=e.next_in,E=e.input,r=n+(e.avail_in-5),a=e.next_out,I=e.output,s=a-(t-e.avail_out),i=a+(e.avail_out-257),o=v.dmax,l=v.wsize,u=v.whave,c=v.wnext,d=v.window,h=v.hold,f=v.bits,p=v.lencode,m=v.distcode,g=(1<<v.lenbits)-1,_=(1<<v.distbits)-1;e:do for(f<15&&(h+=E[n++]<<f,f+=8,h+=E[n++]<<f,f+=8),b=p[h&g];;){if(h>>>=w=b>>>24,f-=w,0==(w=b>>>16&255))I[a++]=65535&b;else if(16&w)for(y=65535&b,(w&=15)&&(f<w&&(h+=E[n++]<<f,f+=8),y+=h&(1<<w)-1,h>>>=w,f-=w),f<15&&(h+=E[n++]<<f,f+=8,h+=E[n++]<<f,f+=8),b=m[h&_];;){if(h>>>=w=b>>>24,f-=w,16&(w=b>>>16&255)){if(T=65535&b,f<(w&=15)&&(h+=E[n++]<<f,(f+=8)<w&&(h+=E[n++]<<f,f+=8)),(T+=h&(1<<w)-1)>o){e.msg="invalid distance too far back",v.mode=16209;break e}if(h>>>=w,f-=w,T>(w=a-s)){if((w=T-w)>u&&v.sane){e.msg="invalid distance too far back",v.mode=16209;break e}if(k=0,S=d,0===c){if(k+=l-w,w<y){y-=w;do I[a++]=d[k++];while(--w);k=a-T,S=I}}else if(c<w){if(k+=l+c-w,(w-=c)<y){y-=w;do I[a++]=d[k++];while(--w);if(k=0,c<y){y-=w=c;do I[a++]=d[k++];while(--w);k=a-T,S=I}}}else if(k+=c-w,w<y){y-=w;do I[a++]=d[k++];while(--w);k=a-T,S=I}for(;y>2;)I[a++]=S[k++],I[a++]=S[k++],I[a++]=S[k++],y-=3;y&&(I[a++]=S[k++],y>1&&(I[a++]=S[k++]))}else{k=a-T;do I[a++]=I[k++],I[a++]=I[k++],I[a++]=I[k++],y-=3;while(y>2);y&&(I[a++]=I[k++],y>1&&(I[a++]=I[k++]))}}else if((64&w)==0){b=m[(65535&b)+(h&(1<<w)-1)];continue}else{e.msg="invalid distance code",v.mode=16209;break e}break}else if((64&w)==0){b=p[(65535&b)+(h&(1<<w)-1)];continue}else if(32&w){v.mode=16191;break e}else{e.msg="invalid literal/length code",v.mode=16209;break e}break}while(n<r&&a<i);n-=y=f>>3,f-=y<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=a<i?257+(i-a):257-(a-i),v.hold=h,v.bits=f};let tT=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),tk=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tS=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tE=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var tI=(e,t,n,r,a,s,i,o)=>{let l,u,c,d,h,f,p,m,g;let _=o.bits,b=0,w=0,y=0,T=0,k=0,S=0,E=0,I=0,v=0,N=0,A=null,O=new Uint16Array(16),R=new Uint16Array(16),x=null;for(b=0;b<=15;b++)O[b]=0;for(w=0;w<r;w++)O[t[n+w]]++;for(T=15,k=_;T>=1&&0===O[T];T--);if(k>T&&(k=T),0===T)return a[s++]=0x1400000,a[s++]=0x1400000,o.bits=1,0;for(y=1;y<T&&0===O[y];y++);for(k<y&&(k=y),I=1,b=1;b<=15;b++)if(I<<=1,(I-=O[b])<0)return -1;if(I>0&&(0===e||1!==T))return -1;for(b=1,R[1]=0;b<15;b++)R[b+1]=R[b]+O[b];for(w=0;w<r;w++)0!==t[n+w]&&(i[R[t[n+w]]++]=w);if(0===e?(A=x=i,f=20):1===e?(A=tT,x=tk,f=257):(A=tS,x=tE,f=0),N=0,w=0,b=y,h=s,S=k,E=0,c=-1,d=(v=1<<k)-1,1===e&&v>852||2===e&&v>592)return 1;for(;;){p=b-E,i[w]+1<f?(m=0,g=i[w]):i[w]>=f?(m=x[i[w]-f],g=A[i[w]-f]):(m=96,g=0),l=1<<b-E,y=u=1<<S;do a[h+(N>>E)+(u-=l)]=p<<24|m<<16|g|0;while(0!==u);for(l=1<<b-1;N&l;)l>>=1;if(0!==l?(N&=l-1,N+=l):N=0,w++,0==--O[b]){if(b===T)break;b=t[n+i[w]]}if(b>k&&(N&d)!==c){for(0===E&&(E=k),h+=y,I=1<<(S=b-E);S+E<T&&!((I-=O[S+E])<=0);){;S++,I<<=1}if(v+=1<<S,1===e&&v>852||2===e&&v>592)return 1;a[c=N&d]=k<<24|S<<16|h-s|0}}return 0!==N&&(a[h+N]=b-E<<24|4194304),o.bits=k,0};let{Z_FINISH:tv,Z_BLOCK:tN,Z_TREES:tA,Z_OK:tO,Z_STREAM_END:tR,Z_NEED_DICT:tx,Z_STREAM_ERROR:tD,Z_DATA_ERROR:tU,Z_MEM_ERROR:tC,Z_BUF_ERROR:tP,Z_DEFLATED:tB}=eh,tL=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function tV(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let tF=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<16180||t.mode>16211?1:0},tz=e=>{if(tF(e))return tD;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,tO},t$=e=>{if(tF(e))return tD;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,tz(e)},tH=(e,t)=>{let n;if(tF(e))return tD;let r=e.state;return(t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?tD:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,t$(e))},tK=(e,t)=>{if(!e)return tD;let n=new tV;e.state=n,n.strm=e,n.window=null,n.mode=16180;let r=tH(e,t);return r!==tO&&(e.state=null),r},tj=!0,tM=e=>{if(tj){r=new Int32Array(512),a=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(tI(1,e.lens,0,288,r,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;tI(2,e.lens,0,32,a,0,e.work,{bits:5}),tj=!1}e.lencode=r,e.lenbits=9,e.distcode=a,e.distbits=5},tW=(e,t,n,r)=>{let a;let s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):((a=s.wsize-s.wnext)>r&&(a=r),s.window.set(t.subarray(n-r,n-r+a),s.wnext),(r-=a)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0};var tG={inflateReset:t$,inflateInit2:tK,inflate:(e,t)=>{let n,r,a,s,i,o,l,u,c,d,h,f,p,m,g,_,b,w,y,T,k,S,E,I;let v=0,N=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tF(e)||!e.output||!e.input&&0!==e.avail_in)return tD;16191===(n=e.state).mode&&(n.mode=16192),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,u=n.hold,c=n.bits,d=o,h=l,S=tO;t:for(;;)switch(n.mode){case 16180:if(0===n.wrap){n.mode=16192;break}for(;c<16;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,N[0]=255&u,N[1]=u>>>8&255,n.check=ec(n.check,N,2,0),u=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=16209;break}if((15&u)!==tB){e.msg="unknown compression method",n.mode=16209;break}if(u>>>=4,c-=4,k=(15&u)+8,0===n.wbits&&(n.wbits=k),k>15||k>n.wbits){e.msg="invalid window size",n.mode=16209;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:16191,u=0,c=0;break;case 16181:for(;c<16;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if(n.flags=u,(255&n.flags)!==tB){e.msg="unknown compression method",n.mode=16209;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=16209;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,n.check=ec(n.check,N,2,0)),u=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,N[2]=u>>>16&255,N[3]=u>>>24&255,n.check=ec(n.check,N,4,0)),u=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,n.check=ec(n.check,N,2,0)),u=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(N[0]=255&u,N[1]=u>>>8&255,n.check=ec(n.check,N,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((f=n.length)>o&&(f=o),f&&(n.head&&(k=n.head.extra_len-n.length,!n.head.extra&&(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),k)),512&n.flags&&4&n.wrap&&(n.check=ec(n.check,r,f,s)),o-=f,s+=f,n.length-=f),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break t;f=0;do k=r[s+f++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k));while(k&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=ec(n.check,r,f,s)),o-=f,s+=f,k)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break t;f=0;do k=r[s+f++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k));while(k&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=ec(n.check,r,f,s)),o-=f,s+=f,k)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=16209;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=16191;break;case 16189:for(;c<32;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}e.adler=n.check=tL(u),u=0,c=0,n.mode=16190;case 16190:if(0===n.havedict)return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=u,n.bits=c,tx;e.adler=n.check=1,n.mode=16191;case 16191:if(t===tN||t===tA)break t;case 16192:if(n.last){u>>>=7&c,c-=7&c,n.mode=16206;break}for(;c<3;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}switch(n.last=1&u,c-=1,3&(u>>>=1)){case 0:n.mode=16193;break;case 1:if(tM(n),n.mode=16199,t===tA){u>>>=2,c-=2;break t}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=16209}u>>>=2,c-=2;break;case 16193:for(u>>>=7&c,c-=7&c;c<32;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=16209;break}if(n.length=65535&u,u=0,c=0,n.mode=16194,t===tA)break t;case 16194:n.mode=16195;case 16195:if(f=n.length){if(f>o&&(f=o),f>l&&(f=l),0===f)break t;a.set(r.subarray(s,s+f),i),o-=f,s+=f,l-=f,i+=f,n.length-=f;break}n.mode=16191;break;case 16196:for(;c<14;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if(n.nlen=(31&u)+257,u>>>=5,c-=5,n.ndist=(31&u)+1,u>>>=5,c-=5,n.ncode=(15&u)+4,u>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=16209;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}n.lens[A[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},S=tI(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,S){e.msg="invalid code lengths set",n.mode=16209;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;g=(v=n.lencode[u&(1<<n.lenbits)-1])>>>24,_=v>>>16&255,b=65535&v,!(g<=c);){;if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if(b<16)u>>>=g,c-=g,n.lens[n.have++]=b;else{if(16===b){for(I=g+2;c<I;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if(u>>>=g,c-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=16209;break}k=n.lens[n.have-1],f=3+(3&u),u>>>=2,c-=2}else if(17===b){for(I=g+3;c<I;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}u>>>=g,c-=g,k=0,f=3+(7&u),u>>>=3,c-=3}else{for(I=g+7;c<I;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}u>>>=g,c-=g,k=0,f=11+(127&u),u>>>=7,c-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=16209;break}for(;f--;)n.lens[n.have++]=k}}if(16209===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=16209;break}if(n.lenbits=9,E={bits:n.lenbits},S=tI(1,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,S){e.msg="invalid literal/lengths set",n.mode=16209;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},S=tI(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,S){e.msg="invalid distances set",n.mode=16209;break}if(n.mode=16199,t===tA)break t;case 16199:n.mode=16200;case 16200:if(o>=6&&l>=258){e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=u,n.bits=c,ty(e,h),i=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,r=e.input,o=e.avail_in,u=n.hold,c=n.bits,16191===n.mode&&(n.back=-1);break}for(n.back=0;g=(v=n.lencode[u&(1<<n.lenbits)-1])>>>24,_=v>>>16&255,b=65535&v,!(g<=c);){;if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if(_&&(240&_)==0){for(w=g,y=_,T=b;g=(v=n.lencode[T+((u&(1<<w+y)-1)>>w)])>>>24,_=v>>>16&255,b=65535&v,!(w+g<=c);){;if(0===o)break t;o--,u+=r[s++]<<c,c+=8}u>>>=w,c-=w,n.back+=w}if(u>>>=g,c-=g,n.back+=g,n.length=b,0===_){n.mode=16205;break}if(32&_){n.back=-1,n.mode=16191;break}if(64&_){e.msg="invalid literal/length code",n.mode=16209;break}n.extra=15&_,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;c<I;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;g=(v=n.distcode[u&(1<<n.distbits)-1])>>>24,_=v>>>16&255,b=65535&v,!(g<=c);){;if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if((240&_)==0){for(w=g,y=_,T=b;g=(v=n.distcode[T+((u&(1<<w+y)-1)>>w)])>>>24,_=v>>>16&255,b=65535&v,!(w+g<=c);){;if(0===o)break t;o--,u+=r[s++]<<c,c+=8}u>>>=w,c-=w,n.back+=w}if(u>>>=g,c-=g,n.back+=g,64&_){e.msg="invalid distance code",n.mode=16209;break}n.offset=b,n.extra=15&_,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;c<I;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=16209;break}n.mode=16204;case 16204:if(0===l)break t;if(f=h-l,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=16209;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=a,p=i-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do a[i++]=m[p++];while(--f);0===n.length&&(n.mode=16200);break;case 16205:if(0===l)break t;a[i++]=n.length,l--,n.mode=16200;break;case 16206:if(n.wrap){for(;c<32;){if(0===o)break t;o--,u|=r[s++]<<c,c+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?ec(n.check,a,h,i-h):el(n.check,a,h,i-h)),h=l,4&n.wrap&&(n.flags?u:tL(u))!==n.check){e.msg="incorrect data check",n.mode=16209;break}u=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===o)break t;o--,u+=r[s++]<<c,c+=8}if(4&n.wrap&&u!==(0xffffffff&n.total)){e.msg="incorrect length check",n.mode=16209;break}u=0,c=0}n.mode=16208;case 16208:S=tR;break t;case 16209:S=tU;break t;case 16210:return tC;default:return tD}return e.next_out=i,e.avail_out=l,e.next_in=s,e.avail_in=o,n.hold=u,n.bits=c,(n.wsize||h!==e.avail_out&&n.mode<16209&&(n.mode<16206||t!==tv))&&tW(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?ec(n.check,a,h,e.next_out-h):el(n.check,a,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(16191===n.mode?128:0)+(16199===n.mode||16194===n.mode?256:0),(0===d&&0===h||t===tv)&&S===tO&&(S=tP),S},inflateEnd:e=>{if(tF(e))return tD;let t=e.state;return t.window&&(t.window=null),e.state=null,tO},inflateGetHeader:(e,t)=>{if(tF(e))return tD;let n=e.state;return(2&n.wrap)==0?tD:(n.head=t,t.done=!1,tO)},inflateSetDictionary:(e,t)=>{let n,r;let a=t.length;return tF(e)||0!==(n=e.state).wrap&&16190!==n.mode?tD:16190===n.mode&&(r=el(r=1,t,a,0))!==n.check?tU:tW(e,t,a,a)?(n.mode=16210,tC):(n.havedict=1,tO)}},tZ=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let tX=Object.prototype.toString,{Z_NO_FLUSH:tY,Z_FINISH:tJ,Z_OK:tq,Z_STREAM_END:tQ,Z_NEED_DICT:t0,Z_STREAM_ERROR:t1,Z_DATA_ERROR:t2,Z_MEM_ERROR:t3}=eh;function t6(e){this.options=tn.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new to,this.strm.avail_out=0;let n=tG.inflateInit2(this.strm,t.windowBits);if(n!==tq)throw Error(ed[n]);if(this.header=new tZ,tG.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=ti.string2buf(t.dictionary):"[object ArrayBuffer]"===tX.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=tG.inflateSetDictionary(this.strm,t.dictionary))!==tq))throw Error(ed[n])}function t5(e,t){let n=new t6(t);if(n.push(e),n.err)throw n.msg||ed[n.err];return n.result}t6.prototype.push=function(e,t){let n,r,a;let s=this.strm,i=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?tJ:tY,"[object ArrayBuffer]"===tX.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){for(0===s.avail_out&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),(n=tG.inflate(s,r))===t0&&o&&((n=tG.inflateSetDictionary(s,o))===tq?n=tG.inflate(s,r):n===t2&&(n=t0));s.avail_in>0&&n===tQ&&s.state.wrap>0&&0!==e[s.next_in];)tG.inflateReset(s),n=tG.inflate(s,r);switch(n){case t1:case t2:case t0:case t3:return this.onEnd(n),this.ended=!0,!1}if(a=s.avail_out,s.next_out&&(0===s.avail_out||n===tQ)){if("string"===this.options.to){let e=ti.utf8border(s.output,s.next_out),t=s.next_out-e,n=ti.buf2string(s.output,e);s.next_out=t,s.avail_out=i-t,t&&s.output.set(s.output.subarray(e,e+t),0),this.onData(n)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out))}if(n!==tq||0!==a){if(n===tQ)return n=tG.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===s.avail_in)break}}return!0},t6.prototype.onData=function(e){this.chunks.push(e)},t6.prototype.onEnd=function(e){e===tq&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=tn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:t4,deflate:t8,deflateRaw:t9,gzip:t7}={Deflate:tb,deflate:tw,deflateRaw:function(e,t){return(t=t||{}).raw=!0,tw(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,tw(e,t)},constants:eh},{Inflate:ne,inflate:nt,inflateRaw:nn,ungzip:nr}={Inflate:t6,inflate:t5,inflateRaw:function(e,t){return(t=t||{}).raw=!0,t5(e,t)},ungzip:t5,constants:eh};function na(e){return/^\d+$/.test(e)&&(e=Number.parseInt(e,10)),e}let ns={Default:{Settings:{Type:"Translate",Types:["Official","Translate"],Languages:["EN","ZH"],CacheSize:50},Configs:{breakLine:{"text/xml":"&#x000A;","application/xml":"&#x000A;","text/vtt":"\n","application/vtt":"\n","text/json":"\n","application/json":"\n"}}},Spotify:{Settings:{CountryCode:"US",Types:["Translate","External"],Languages:["AUTO","ZH"]}}};function ni(e=[]){e=e.map(e=>{switch(e?.propertyId?.scope){case"ios-feature-reinventfree":if(e?.propertyId?.name==="is_india_quicksilver_campaign_enabled")e.structuredValue={oneofKind:"boolValue",boolValue:{value:!1}};break;case"ios-liveaudio-livestreampage":if(e?.propertyId?.name==="context_menu_enabled")e.structuredValue={oneofKind:"boolValue",boolValue:{value:!0}}}return e}).filter(Boolean)}function no(e={}){return e["audiobook-onboarding-completed"]={value:{oneofKind:"boolValue",boolValue:!0}},e["has-audiobooks-subscription"]={value:{oneofKind:"boolValue",boolValue:!0}},e["player-license"]={value:{oneofKind:"stringValue",stringValue:"premium"}},e.mobile={value:{oneofKind:"boolValue",boolValue:!0}},e["financial-product"]={value:{oneofKind:"stringValue",stringValue:"pr:premium,tc:0"}},e["premium-mini"]={value:{oneofKind:"boolValue",boolValue:!0}},e["streaming-rules"]={value:{oneofKind:"stringValue",stringValue:""}},e["license-acceptance-grace-days"]={value:{oneofKind:"longValue",longValue:30}},e.name={value:{oneofKind:"stringValue",stringValue:"Spotify Premium"}},e["mobile-login"]={value:{oneofKind:"boolValue",boolValue:!0}},e["hifi-optin-intent"]={value:{oneofKind:"boolValue",boolValue:!0}},e["pick-and-shuffle"]={value:{oneofKind:"boolValue",boolValue:!1}},e["on-demand"]={value:{oneofKind:"boolValue",boolValue:!0}},e.ads={value:{oneofKind:"boolValue",boolValue:!1}},e.catalogue={value:{oneofKind:"stringValue",stringValue:"premium"}},e["high-bitrate"]={value:{oneofKind:"boolValue",boolValue:!0}},e.libspotify={value:{oneofKind:"boolValue",boolValue:!0}},e["nft-disabled"]={value:{oneofKind:"stringValue",stringValue:"1"}},e.shuffle={value:{oneofKind:"boolValue",boolValue:!1}},e["audio-quality"]={value:{oneofKind:"stringValue",stringValue:"1"}},e.offline={value:{oneofKind:"boolValue",boolValue:!0}},e["hifi-eligible"]={value:{oneofKind:"boolValue",boolValue:!0}},e["pause-after"]={value:{oneofKind:"longValue",longValue:0}},e["addon-hifi"]={value:{oneofKind:"boolValue",boolValue:!0}},e.can_use_superbird={value:{oneofKind:"boolValue",boolValue:!0}},e.type={value:{oneofKind:"stringValue",stringValue:"premium"}},e["india-experience"]={value:{oneofKind:"stringValue",stringValue:"1"}},e["loudness-levels"]={value:{oneofKind:"stringValue",stringValue:"1:-9.0,0.0,3.0:-2.0"}},e["payments-initial-campaign"]={value:{oneofKind:"stringValue",stringValue:"web"}},e["shuffle-eligible"]={value:{oneofKind:"boolValue",boolValue:!0}},e.unrestricted={value:{oneofKind:"boolValue",boolValue:!0}},e["com.spotify.madprops.use.ucs.product.state"]={value:{oneofKind:"boolValue",boolValue:!1}},e}!function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,a,s,i)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:a,wireType:s,data:i})},e.onWrite=(t,n,r)=>{for(let{no:t,wireType:a,data:s}of e.list(n))r.tag(t,a).raw(s)},e.list=(n,r)=>{if(t(n)){let t=n[e.symbol];return r?t.filter(e=>e.no==r):t}return[]},e.last=(t,n)=>e.list(t,n).slice(-1)[0];let t=t=>t&&Array.isArray(t[e.symbol])}(i||(i={}));function nl(e,t,n){let r,a;for(let s of e.fields){let e=s.localName;if(s.oneof){let i=n[s.oneof];if((null==i?void 0:i.oneofKind)==void 0)continue;if(r=i[e],(a=t[s.oneof]).oneofKind=i.oneofKind,void 0==r){delete a[e];continue}}else if(r=n[e],a=t,void 0==r)continue;switch(s.repeat&&(a[e].length=r.length),s.kind){case"scalar":case"enum":if(s.repeat)for(let t=0;t<r.length;t++)a[e][t]=r[t];else a[e]=r;break;case"message":let i=s.T();if(s.repeat)for(let t=0;t<r.length;t++)a[e][t]=i.create(r[t]);else void 0===a[e]?a[e]=i.create(r):i.mergePartial(a[e],r);break;case"map":switch(s.V.kind){case"scalar":case"enum":Object.assign(a[e],r);break;case"message":let o=s.V.T();for(let t of Object.keys(r))a[e][t]=o.create(r[t])}}}}!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(o||(o={}));let nu=Symbol.for("protobuf-ts/message-type");function nc(e){let t=!1,n=[];for(let r=0;r<e.length;r++){let a=e.charAt(r);"_"==a?t=!0:/\d/.test(a)?(n.push(a),t=!0):t?(n.push(a.toUpperCase()),t=!1):0==r?n.push(a.toLowerCase()):n.push(a)}return n.join("")}function nd(e){var t,n,r,a;return e.localName=null!==(t=e.localName)&&void 0!==t?t:nc(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:nc(e.name),e.repeat=null!==(r=e.repeat)&&void 0!==r?r:c.NO,e.opt=null!==(a=e.opt)&&void 0!==a?a:!e.repeat&&!e.oneof&&"message"==e.kind,e}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(l||(l={})),!function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(u||(u={})),!function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(c||(c={}));class nh{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;let e=[],t=[],n=[];for(let r of this.fields)if(r.oneof)!n.includes(r.oneof)&&(n.push(r.oneof),e.push(r.oneof),t.push(r.oneof));else switch(t.push(r.localName),r.kind){case"scalar":case"enum":(!r.opt||r.repeat)&&e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t,n=!1){if(t<0)return!0;if(null==e||"object"!=typeof e)return!1;this.prepare();let r=Object.keys(e),a=this.data;if(r.length<a.req.length||a.req.some(e=>!r.includes(e))||!n&&r.some(e=>!a.known.includes(e)))return!1;if(t<1)return!0;for(let r of a.oneofs){let a=e[r];if(!function(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":if(void 0===e[e.oneofKind])return!1;return 2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}(a))return!1;if(void 0===a.oneofKind)continue;let s=this.fields.find(e=>e.localName===a.oneofKind);if(!s||!this.field(a[a.oneofKind],s,n,t))return!1}for(let r of this.fields)if(void 0===r.oneof&&!this.field(e[r.localName],r,n,t))return!1;return!0}field(e,t,n,r){let a=t.repeat;switch(t.kind){case"scalar":if(void 0===e)return t.opt;if(a)return this.scalars(e,t.T,r,t.L);return this.scalar(e,t.T,t.L);case"enum":if(void 0===e)return t.opt;if(a)return this.scalars(e,l.INT32,r);return this.scalar(e,l.INT32);case"message":if(void 0===e)break;if(a)return this.messages(e,t.T(),n,r);return this.message(e,t.T(),n,r);case"map":if("object"!=typeof e||null===e)return!1;if(r<2)break;if(!this.mapKeys(e,t.K,r))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,r,t.V.L);case"enum":return this.scalars(Object.values(e),l.INT32,r);case"message":return this.messages(Object.values(e),t.V.T(),n,r)}}return!0}message(e,t,n,r){return n?t.isAssignable(e,r):t.is(e,r)}messages(e,t,n,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(n){for(let n=0;n<e.length&&n<r;n++)if(!t.isAssignable(e[n],r-1))return!1}else for(let n=0;n<e.length&&n<r;n++)if(!t.is(e[n],r-1))return!1;return!0}scalar(e,t,n){let r=typeof e;switch(t){case l.UINT64:case l.FIXED64:case l.INT64:case l.SFIXED64:case l.SINT64:switch(n){case u.BIGINT:return"bigint"==r;case u.NUMBER:return"number"==r&&!isNaN(e);default:return"string"==r}case l.BOOL:return"boolean"==r;case l.STRING:return"string"==r;case l.BYTES:return e instanceof Uint8Array;case l.DOUBLE:case l.FLOAT:return"number"==r&&!isNaN(e);default:return"number"==r&&Number.isInteger(e)}}scalars(e,t,n,r){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e)){for(let a=0;a<e.length&&a<n;a++)if(!this.scalar(e[a],t,r))return!1}return!0}mapKeys(e,t,n){let r=Object.keys(e);switch(t){case l.INT32:case l.FIXED32:case l.SFIXED32:case l.SINT32:case l.UINT32:return this.scalars(r.slice(0,n).map(e=>parseInt(e)),t,n);case l.BOOL:return this.scalars(r.slice(0,n).map(e=>"true"==e||"false"!=e&&e),t,n);default:return this.scalars(r,t,n,u.STRING)}}}function nf(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}function np(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}let nm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ng=[];for(let e=0;e<nm.length;e++)ng[nm[e].charCodeAt(0)]=e;ng["-".charCodeAt(0)]=nm.indexOf("+"),ng["_".charCodeAt(0)]=nm.indexOf("/");function n_(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,(128&n)==0)return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}throw Error("invalid varint")}function nb(e,t,n){for(let r=0;r<28;r+=7){let a=e>>>r,s=!(a>>>7==0&&0==t),i=(s?128|a:a)&255;if(n.push(i),!s)return}let r=e>>>28&15|(7&t)<<4,a=t>>3!=0;if(n.push((a?128|r:r)&255),!!a){for(let e=3;e<31;e+=7){let r=t>>>e,a=r>>>7!=0,s=(a?128|r:r)&255;if(n.push(s),!a)return}n.push(t>>>31&1)}}function nw(e){let t="-"==e[0];t&&(e=e.slice(1));let n=0,r=0;function a(t,a){let s=Number(e.slice(t,a));r*=1e6,(n=1e6*n+s)>=0x100000000&&(r+=n/0x100000000|0,n%=0x100000000)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),[t,n,r]}function ny(e,t){if(t>>>0<=2097151)return""+(0x100000000*t+(e>>>0));let n=(e>>>24|t<<8)>>>0&0xffffff,r=t>>16&65535,a=(0xffffff&e)+6777216*n+6710656*r,s=n+8147497*r,i=2*r;function o(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return a>=1e7&&(s+=Math.floor(a/1e7),a%=1e7),s>=1e7&&(i+=Math.floor(s/1e7),s%=1e7),o(i,0)+o(s,i)+o(a,1)}function nT(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function nk(){let e=this.buf[this.pos++],t=127&e;if((128&e)==0)return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<7,(128&e)==0)return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<14,(128&e)==0)return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<21,(128&e)==0)return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(let t=5;(128&e)!=0&&t<10;t++)e=this.buf[this.pos++];if((128&e)!=0)throw Error("invalid varint");return this.assertBounds(),t>>>0}function nS(e){if(!e)throw Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}!function(){let e=new DataView(new ArrayBuffer(8));s=void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}();let nE=/^-?[0-9]+$/;class nI{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=0x100000000*this.hi+(this.lo>>>0);if(!Number.isSafeInteger(e))throw Error("cannot convert to safe number");return e}}class nv extends nI{static from(e){if(s)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw Error("string is no integer");e=s.C(e);case"number":if(0===e)return this.ZERO;e=s.C(e);case"bigint":if(!e)return this.ZERO;if(e<s.UMIN)throw Error("signed value for ulong");if(e>s.UMAX)throw Error("ulong too large");return s.V.setBigUint64(0,e,!0),new nv(s.V.getInt32(0,!0),s.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!nE.test(e))throw Error("string is no integer");let[t,n,r]=nw(e);if(t)throw Error("signed value for ulong");return new nv(n,r);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw Error("number is no integer");if(e<0)throw Error("signed value for ulong");return new nv(e,e/0x100000000)}throw Error("unknown value "+typeof e)}toString(){return s?this.toBigInt().toString():ny(this.lo,this.hi)}toBigInt(){return nS(s),s.V.setInt32(0,this.lo,!0),s.V.setInt32(4,this.hi,!0),s.V.getBigUint64(0,!0)}}nv.ZERO=new nv(0,0);class nN extends nI{static from(e){if(s)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw Error("string is no integer");e=s.C(e);case"number":if(0===e)return this.ZERO;e=s.C(e);case"bigint":if(!e)return this.ZERO;if(e<s.MIN)throw Error("signed long too small");if(e>s.MAX)throw Error("signed long too large");return s.V.setBigInt64(0,e,!0),new nN(s.V.getInt32(0,!0),s.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!nE.test(e))throw Error("string is no integer");let[t,n,r]=nw(e);if(t){if(r>0x80000000||0x80000000==r&&0!=n)throw Error("signed long too small")}else if(r>=0x80000000)throw Error("signed long too large");let a=new nN(n,r);return t?a.negate():a;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw Error("number is no integer");return e>0?new nN(e,e/0x100000000):new nN(-e,-e/0x100000000).negate()}throw Error("unknown value "+typeof e)}isNegative(){return(0x80000000&this.hi)!=0}negate(){let e=~this.hi,t=this.lo;return t?t=~t+1:e+=1,new nN(t,e)}toString(){if(s)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+ny(e.lo,e.hi)}return ny(this.lo,this.hi)}toBigInt(){return nS(s),s.V.setInt32(0,this.lo,!0),s.V.setInt32(4,this.hi,!0),s.V.getBigInt64(0,!0)}}function nA(e,t){if(!e)throw Error(t)}nN.ZERO=new nN(0,0);function nO(e){if("number"!=typeof e)throw Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>0x7fffffff||e<-0x80000000)throw Error("invalid int 32: "+e)}function nR(e){if("number"!=typeof e)throw Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>0xffffffff||e<0)throw Error("invalid uint 32: "+e)}function nx(e){if("number"!=typeof e)throw Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw Error("invalid float 32: "+e)}function nD(e,t){switch(t){case u.BIGINT:return e.toBigInt();case u.NUMBER:return e.toNumber();default:return e.toString()}}class nU{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap)for(let t of(this.fMap={},null!==(e=this.info.fields)&&void 0!==e?e:[]))this.fMap[t.name]=t,this.fMap[t.jsonName]=t,this.fMap[t.localName]=t}assert(e,t,n){if(!e){let e=nf(n);throw("number"==e||"boolean"==e)&&(e=n.toString()),Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,n){this.prepare();let r=[];for(let[a,s]of Object.entries(e)){let e;let i=this.fMap[a];if(!i){if(!n.ignoreUnknownFields)throw Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${a}`);continue}let o=i.localName;if(i.oneof){if(null===s&&("enum"!==i.kind||"google.protobuf.NullValue"!==i.T()[0]))continue;if(r.includes(i.oneof))throw Error(`Multiple members of the oneof group "${i.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(i.oneof),e=t[i.oneof]={oneofKind:o}}else e=t;if("map"==i.kind){if(null===s)continue;this.assert(np(s),i.name,s);let t=e[o];for(let[e,r]of Object.entries(s)){let a;switch(this.assert(null!==r,i.name+" map value",null),i.V.kind){case"message":a=i.V.T().internalJsonRead(r,n);break;case"enum":if(!1===(a=this.enum(i.V.T(),r,i.name,n.ignoreUnknownFields)))continue;break;case"scalar":a=this.scalar(r,i.V.T,i.V.L,i.name)}this.assert(void 0!==a,i.name+" map value",r);let s=e;i.K==l.BOOL&&(s="true"==s||"false"!=s&&s),t[s=this.scalar(s,i.K,u.STRING,i.name).toString()]=a}}else if(i.repeat){if(null===s)continue;this.assert(Array.isArray(s),i.name,s);let t=e[o];for(let e of s){let r;switch(this.assert(null!==e,i.name,null),i.kind){case"message":r=i.T().internalJsonRead(e,n);break;case"enum":if(!1===(r=this.enum(i.T(),e,i.name,n.ignoreUnknownFields)))continue;break;case"scalar":r=this.scalar(e,i.T,i.L,i.name)}this.assert(void 0!==r,i.name,s),t.push(r)}}else switch(i.kind){case"message":if(null===s&&"google.protobuf.Value"!=i.T().typeName){this.assert(void 0===i.oneof,i.name+" (oneof member)",null);continue}e[o]=i.T().internalJsonRead(s,n,e[o]);break;case"enum":let c=this.enum(i.T(),s,i.name,n.ignoreUnknownFields);if(!1===c)continue;e[o]=c;break;case"scalar":e[o]=this.scalar(s,i.T,i.L,i.name)}}}enum(e,t,n,r){if("google.protobuf.NullValue"==e[0]&&nA(null===t||"NULL_VALUE"===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return nA(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let a=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(a=t.substring(e[2].length));let s=e[1][a];if(void 0===s&&r)return!1;return nA("number"==typeof s,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),s}nA(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,r){let a;try{switch(t){case l.DOUBLE:case l.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){a="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){a="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let r=Number(e);if(Number.isNaN(r)){a="not a number";break}if(!Number.isFinite(r)){a="too large or small";break}return t==l.FLOAT&&nx(r),r;case l.INT32:case l.FIXED32:case l.SFIXED32:case l.SINT32:case l.UINT32:let s;if(null===e)return 0;if("number"==typeof e?s=e:""===e?a="empty string":"string"==typeof e&&(e.trim().length!==e.length?a="extra whitespace":s=Number(e)),void 0===s)break;return t==l.UINT32?nR(s):nO(s),s;case l.INT64:case l.SFIXED64:case l.SINT64:if(null===e)return nD(nN.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return nD(nN.from(e),n);case l.FIXED64:case l.UINT64:if(null===e)return nD(nv.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return nD(nv.from(e),n);case l.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case l.STRING:if(null===e)return"";if("string"!=typeof e){a="extra whitespace";break}try{encodeURIComponent(e)}catch(e){break}return e;case l.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n=new Uint8Array(t),r=0,a=0,s,i=0;for(let t=0;t<e.length;t++){if(void 0===(s=ng[e.charCodeAt(t)]))switch(e[t]){case"=":a=0;case"\n":case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:i=s,a=1;break;case 1:n[r++]=i<<2|(48&s)>>4,i=s,a=2;break;case 2:n[r++]=(15&i)<<4|(60&s)>>2,i=s,a=3;break;case 3:n[r++]=(3&i)<<6|s,a=0}}if(1==a)throw Error("invalid base64 string.");return n.subarray(0,r)}(e)}}catch(e){a=e.message}this.assert(!1,r+(a?" - "+a:""),e)}}class nC{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){let n={};for(let r of this.fields){if(!r.oneof){let a=this.field(r,e[r.localName],t);void 0!==a&&(n[t.useProtoFieldName?r.name:r.jsonName]=a);continue}let a=e[r.oneof];if(a.oneofKind!==r.localName)continue;let s="scalar"==r.kind||"enum"==r.kind?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t,i=this.field(r,a[r.localName],s);nA(void 0!==i),n[t.useProtoFieldName?r.name:r.jsonName]=i}return n}field(e,t,n){let r;if("map"==e.kind){nA("object"==typeof t&&null!==t);let a={};switch(e.V.kind){case"scalar":for(let[n,r]of Object.entries(t)){let t=this.scalar(e.V.T,r,e.name,!1,!0);nA(void 0!==t),a[n.toString()]=t}break;case"message":let s=e.V.T();for(let[r,i]of Object.entries(t)){let t=this.message(s,i,e.name,n);nA(void 0!==t),a[r.toString()]=t}break;case"enum":let i=e.V.T();for(let[r,s]of Object.entries(t)){nA(void 0===s||"number"==typeof s);let t=this.enum(i,s,e.name,!1,!0,n.enumAsInteger);nA(void 0!==t),a[r.toString()]=t}}(n.emitDefaultValues||Object.keys(a).length>0)&&(r=a)}else if(e.repeat){nA(Array.isArray(t));let a=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){let r=this.scalar(e.T,t[n],e.name,e.opt,!0);nA(void 0!==r),a.push(r)}break;case"enum":let s=e.T();for(let r=0;r<t.length;r++){nA(void 0===t[r]||"number"==typeof t[r]);let i=this.enum(s,t[r],e.name,e.opt,!0,n.enumAsInteger);nA(void 0!==i),a.push(i)}break;case"message":let i=e.T();for(let r=0;r<t.length;r++){let s=this.message(i,t[r],e.name,n);nA(void 0!==s),a.push(s)}}(n.emitDefaultValues||a.length>0||n.emitDefaultValues)&&(r=a)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,n)}return r}enum(e,t,n,r,a,s){if("google.protobuf.NullValue"==e[0])return a||r?null:void 0;if(void 0===t){nA(r);return}if(0!==t||a||r)return(nA("number"==typeof t),nA(Number.isInteger(t)),s||!e[1].hasOwnProperty(t))?t:e[2]?e[2]+e[1][t]:e[1][t]}message(e,t,n,r){return void 0===t?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,n,r,a){if(void 0===t){nA(r);return}let s=a||r;switch(e){case l.INT32:case l.SFIXED32:case l.SINT32:if(0===t)return s?0:void 0;return nO(t),t;case l.FIXED32:case l.UINT32:if(0===t)return s?0:void 0;return nR(t),t;case l.FLOAT:nx(t);case l.DOUBLE:if(0===t)return s?0:void 0;if(nA("number"==typeof t),Number.isNaN(t))return"NaN";if(t===Number.POSITIVE_INFINITY)return"Infinity";if(t===Number.NEGATIVE_INFINITY)return"-Infinity";return t;case l.STRING:if(""===t)return s?"":void 0;return nA("string"==typeof t),t;case l.BOOL:if(!1===t)return!s&&void 0;return nA("boolean"==typeof t),t;case l.UINT64:case l.FIXED64:nA("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let i=nv.from(t);if(i.isZero()&&!s)return;return i.toString();case l.INT64:case l.SFIXED64:case l.SINT64:nA("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let o=nN.from(t);if(o.isZero()&&!s)return;return o.toString();case l.BYTES:if(nA(t instanceof Uint8Array),!t.byteLength)return s?"":void 0;return function(e){let t="",n=0,r,a=0;for(let s=0;s<e.length;s++)switch(r=e[s],n){case 0:t+=nm[r>>2],a=(3&r)<<4,n=1;break;case 1:t+=nm[a|r>>4],a=(15&r)<<2,n=2;break;case 2:t+=nm[a|r>>6],t+=nm[63&r],n=0}return n&&(t+=nm[a],t+="=",1==n&&(t+="=")),t}(t)}}}function nP(e,t=u.STRING){switch(e){case l.BOOL:return!1;case l.UINT64:case l.FIXED64:return nD(nv.ZERO,t);case l.INT64:case l.SFIXED64:case l.SINT64:return nD(nN.ZERO,t);case l.DOUBLE:case l.FLOAT:return 0;case l.BYTES:return new Uint8Array(0);case l.STRING:return"";default:return 0}}class nB{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){let t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map(e=>[e.no,e]))}}read(e,t,n,r){this.prepare();let a=void 0===r?e.len:e.pos+r;for(;e.pos<a;){let[r,a]=e.tag(),s=this.fieldNoToField.get(r);if(!s){let s=n.readUnknownField;if("throw"==s)throw Error(`Unknown field ${r} (wire type ${a}) for ${this.info.typeName}`);let o=e.skip(a);!1!==s&&(!0===s?i.onRead:s)(this.info.typeName,t,r,a,o);continue}let u=t,c=s.repeat,d=s.localName;switch(s.oneof&&(u=u[s.oneof]).oneofKind!==d&&(u=t[s.oneof]={oneofKind:d}),s.kind){case"scalar":case"enum":let h="enum"==s.kind?l.INT32:s.T,f="scalar"==s.kind?s.L:void 0;if(c){let t=u[d];if(a==o.LengthDelimited&&h!=l.STRING&&h!=l.BYTES){let n=e.uint32()+e.pos;for(;e.pos<n;)t.push(this.scalar(e,h,f))}else t.push(this.scalar(e,h,f))}else u[d]=this.scalar(e,h,f);break;case"message":if(c){let t=u[d],r=s.T().internalBinaryRead(e,e.uint32(),n);t.push(r)}else u[d]=s.T().internalBinaryRead(e,e.uint32(),n,u[d]);break;case"map":let[p,m]=this.mapEntry(s,e,n);u[d][p]=m}}}mapEntry(e,t,n){let r,a,s=t.uint32(),i=t.pos+s;for(;t.pos<i;){let[s,i]=t.tag();switch(s){case 1:r=e.K==l.BOOL?t.bool().toString():this.scalar(t,e.K,u.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(t,e.V.T,e.V.L);break;case"enum":a=t.int32();break;case"message":a=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw Error(`Unknown field ${s} (wire type ${i}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===r){let t=nP(e.K);r=e.K==l.BOOL?t.toString():t}if(void 0===a)switch(e.V.kind){case"scalar":a=nP(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create()}return[r,a]}scalar(e,t,n){switch(t){case l.INT32:return e.int32();case l.STRING:return e.string();case l.BOOL:return e.bool();case l.DOUBLE:return e.double();case l.FLOAT:return e.float();case l.INT64:return nD(e.int64(),n);case l.UINT64:return nD(e.uint64(),n);case l.FIXED64:return nD(e.fixed64(),n);case l.FIXED32:return e.fixed32();case l.BYTES:return e.bytes();case l.UINT32:return e.uint32();case l.SFIXED32:return e.sfixed32();case l.SFIXED64:return nD(e.sfixed64(),n);case l.SINT32:return e.sint32();case l.SINT64:return nD(e.sint64(),n)}}}class nL{constructor(e){this.info=e}prepare(){if(!this.fields){let e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((e,t)=>e.no-t.no)}}write(e,t,n){for(let r of(this.prepare(),this.fields)){let a,s,i=r.repeat,o=r.localName;if(r.oneof){let t=e[r.oneof];if(t.oneofKind!==o)continue;a=t[o],s=!0}else a=e[o],s=!1;switch(r.kind){case"scalar":case"enum":let u="enum"==r.kind?l.INT32:r.T;if(i){if(nA(Array.isArray(a)),i==c.PACKED)this.packed(t,u,r.no,a);else for(let e of a)this.scalar(t,u,r.no,e,!0)}else void 0===a?nA(r.opt):this.scalar(t,u,r.no,a,s||r.opt);break;case"message":if(i)for(let e of(nA(Array.isArray(a)),a))this.message(t,n,r.T(),r.no,e);else this.message(t,n,r.T(),r.no,a);break;case"map":for(let[e,s]of(nA("object"==typeof a&&null!==a),Object.entries(a)))this.mapEntry(t,n,r,e,s)}}let r=n.writeUnknownFields;!1!==r&&(!0===r?i.onWrite:r)(this.info.typeName,e,t)}mapEntry(e,t,n,r,a){e.tag(n.no,o.LengthDelimited),e.fork();let s=r;switch(n.K){case l.INT32:case l.FIXED32:case l.UINT32:case l.SFIXED32:case l.SINT32:s=Number.parseInt(r);break;case l.BOOL:nA("true"==r||"false"==r),s="true"==r}switch(this.scalar(e,n.K,1,s,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,a,!0);break;case"enum":this.scalar(e,l.INT32,2,a,!0);break;case"message":this.message(e,t,n.V.T(),2,a)}e.join()}message(e,t,n,r,a){void 0!==a&&(n.internalBinaryWrite(a,e.tag(r,o.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,r,a){let[s,i,o]=this.scalarInfo(t,r);(!o||a)&&(e.tag(n,s),e[i](r))}packed(e,t,n,r){if(!r.length)return;nA(t!==l.BYTES&&t!==l.STRING),e.tag(n,o.LengthDelimited),e.fork();let[,a]=this.scalarInfo(t);for(let t=0;t<r.length;t++)e[a](r[t]);e.join()}scalarInfo(e,t){let n,r=o.Varint,a=void 0===t,s=0===t;switch(e){case l.INT32:n="int32";break;case l.STRING:s=a||!t.length,r=o.LengthDelimited,n="string";break;case l.BOOL:s=!1===t,n="bool";break;case l.UINT32:n="uint32";break;case l.DOUBLE:r=o.Bit64,n="double";break;case l.FLOAT:r=o.Bit32,n="float";break;case l.INT64:s=a||nN.from(t).isZero(),n="int64";break;case l.UINT64:s=a||nv.from(t).isZero(),n="uint64";break;case l.FIXED64:s=a||nv.from(t).isZero(),r=o.Bit64,n="fixed64";break;case l.BYTES:s=a||!t.byteLength,r=o.LengthDelimited,n="bytes";break;case l.FIXED32:r=o.Bit32,n="fixed32";break;case l.SFIXED32:r=o.Bit32,n="sfixed32";break;case l.SFIXED64:s=a||nN.from(t).isZero(),r=o.Bit64,n="sfixed64";break;case l.SINT32:n="sint32";break;case l.SINT64:s=a||nN.from(t).isZero(),n="sint64"}return[r,n,a||s]}}let nV={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},nF={ignoreUnknownFields:!1};function nz(e){return e?Object.assign(Object.assign({},nV),e):nV}let n$=Object.values;function nH(e,t,n){if(t===n)return!0;if(e!==l.BYTES)return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!=n[e])return!1;return!0}function nK(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!nH(e,t[r],n[r]))return!1;return!0}function nj(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}let nM={writeUnknownFields:!0,writerFactory:()=>new nW};class nW{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(nR(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return nO(e),nT(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){nx(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){nR(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){nO(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return nO(e),nT(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=nN.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=nv.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=nN.from(e);return nb(t.lo,t.hi,this.buf),this}sint64(e){let t=nN.from(e),n=t.hi>>31;return nb(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=nv.from(e);return nb(t.lo,t.hi,this.buf),this}}let nG={readUnknownField:!0,readerFactory:e=>new nZ(e)};class nZ{constructor(e,t){this.varint64=n_,this.uint32=nk,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case o.Varint:for(;128&this.buf[this.pos++];);break;case o.Bit64:this.pos+=4;case o.Bit32:this.pos+=4;break;case o.LengthDelimited:let n=this.uint32();this.pos+=n;break;case o.StartGroup:let r;for(;(r=this.tag()[1])!==o.EndGroup;)this.skip(r);break;default:throw Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new nN(...this.varint64())}uint64(){return new nv(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return new nN(e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new nv(this.sfixed32(),this.sfixed32())}sfixed64(){return new nN(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}let nX=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class nY{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(nd),this.options=null!=n?n:{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},nX),{[nu]:{value:this}})),this.refTypeCheck=new nh(this),this.refJsonReader=new nU(this),this.refJsonWriter=new nC(this),this.refBinReader=new nB(this),this.refBinWriter=new nL(this)}create(e){let t=function(e){let t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},nu,{value:e});for(let n of e.fields){let e=n.localName;if(!n.opt){if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=nP(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}}return t}(this);return void 0!==e&&nl(this,t,e),t}clone(e){let t=this.create();return nl(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let e=r.localName,a=r.oneof?t[r.oneof][e]:t[e],s=r.oneof?n[r.oneof][e]:n[e];switch(r.kind){case"enum":case"scalar":let i="enum"==r.kind?l.INT32:r.T;if(!(r.repeat?nK(i,a,s):nH(i,a,s)))return!1;break;case"map":if(!("message"==r.V.kind?nj(r.V.T(),n$(a),n$(s)):nK("enum"==r.V.kind?l.INT32:r.V.T,n$(a),n$(s))))return!1;break;case"message":let o=r.T();if(!(r.repeat?nj(o,a,s):o.equals(a,s)))return!1}}return!0}(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){nl(this,e,t)}fromBinary(e,t){var n;let r=(n=t)?Object.assign(Object.assign({},nG),n):nG;return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,t){var n;return this.internalJsonRead(e,(n=t)?Object.assign(Object.assign({},nF),n):nF)}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,nz(t))}toJsonString(e,t){var n;return JSON.stringify(this.toJson(e,t),null,null!==(n=null==t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){var n;let r=(n=t)?Object.assign(Object.assign({},nM),n):nM;return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let r=null!=n?n:this.create();return this.refJsonReader.read(e,r,t),r}throw Error(`Unable to parse message ${this.typeName} from JSON ${nf(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,r){let a=null!=r?r:this.create();return this.refBinReader.read(e,a,n,t),a}}let nJ=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.AccountAttribute",[{no:2,name:"bool_value",kind:"scalar",oneof:"value",T:8},{no:3,name:"long_value",kind:"scalar",oneof:"value",T:3,L:2},{no:4,name:"string_value",kind:"scalar",oneof:"value",T:9}])}};new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition",[{no:1,name:"id",kind:"message",T:()=>nq},{no:4,name:"metadata",kind:"message",T:()=>nQ},{no:5,name:"bool_spec",kind:"message",oneof:"specification",T:()=>n0},{no:6,name:"int_spec",kind:"message",oneof:"specification",T:()=>n1},{no:7,name:"enum_spec",kind:"message",oneof:"specification",T:()=>n2}])}};let nq=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.Identifier",[{no:1,name:"scope",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}])}},nQ=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.Metadata",[{no:1,name:"component_id",kind:"scalar",T:9},{no:2,name:"description",kind:"scalar",T:9}])}},n0=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.BoolSpec",[{no:1,name:"default",kind:"scalar",T:8}])}},n1=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.IntSpec",[{no:1,name:"default",kind:"scalar",T:5},{no:2,name:"lower",kind:"scalar",T:5},{no:3,name:"upper",kind:"scalar",T:5}])}},n2=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.PropertyDefinition.EnumSpec",[{no:1,name:"default",kind:"scalar",T:9},{no:2,name:"values",kind:"scalar",repeat:2,T:9}])}};!function(e){e[e.BLOCKING=0]="BLOCKING",e[e.BACKGROUND_SYNC=1]="BACKGROUND_SYNC",e[e.ASYNC=2]="ASYNC",e[e.PUSH_INITIATED=3]="PUSH_INITIATED",e[e.RECONNECT=4]="RECONNECT"}(d||(d={})),!function(e){e[e.INVALID=0]="INVALID",e[e.USER_ID=1]="USER_ID",e[e.INSTALLATION_ID=2]="INSTALLATION_ID",e[e.VERSION=3]="VERSION"}(h||(h={}));let n3=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.ResolveRequest",[{no:1,name:"property_set_id",kind:"scalar",T:9},{no:2,name:"fetch_type",kind:"message",T:()=>rt},{no:11,name:"context",kind:"message",T:()=>rn},{no:12,name:"backend_context",kind:"message",oneof:"resolutionContext",T:()=>ra}])}},n6=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.ResolveResponse",[{no:1,name:"configuration",kind:"message",T:()=>n5}])}},n5=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Configuration",[{no:1,name:"configuration_assignment_id",kind:"scalar",T:9},{no:2,name:"fetch_time_millis",kind:"scalar",T:3,L:2},{no:3,name:"assigned_values",kind:"message",repeat:1,T:()=>n4}])}},n4=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue",[{no:1,name:"property_id",kind:"message",T:()=>nq},{no:2,name:"metadata",kind:"message",T:()=>n8},{no:3,name:"bool_value",kind:"message",oneof:"structuredValue",T:()=>n9},{no:4,name:"int_value",kind:"message",oneof:"structuredValue",T:()=>n7},{no:5,name:"enum_value",kind:"message",oneof:"structuredValue",T:()=>re}])}},n8=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue.Metadata",[{no:1,name:"policy_id",kind:"scalar",T:3,L:2},{no:2,name:"external_realm",kind:"scalar",T:9},{no:3,name:"external_realm_id",kind:"scalar",T:3,L:2}])}},n9=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue.BoolValue",[{no:1,name:"value",kind:"scalar",T:8}])}},n7=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue.IntValue",[{no:1,name:"value",kind:"scalar",T:5}])}},re=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Configuration.AssignedValue.EnumValue",[{no:1,name:"value",kind:"scalar",T:9}])}},rt=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Fetch",[{no:1,name:"type",kind:"enum",T:()=>["spotify.remote_config.ucs.proto.Fetch.Type",d]}])}},rn=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Context",[{no:1,name:"context",kind:"message",repeat:1,T:()=>rr}])}},rr=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Context.ContextEntry",[{no:10,name:"value",kind:"scalar",T:9},{no:1,name:"known_context",kind:"enum",oneof:"context",T:()=>["spotify.remote_config.ucs.proto.DynamicContext.KnownContext",h,"KNOWN_CONTEXT_"]}])}},ra=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.BackendContext",[{no:1,name:"system",kind:"scalar",T:9},{no:2,name:"service_name",kind:"scalar",T:9},{no:3,name:"static_context",kind:"message",T:()=>rs},{no:4,name:"dynamic_context",kind:"message",T:()=>ro},{no:10,name:"surface_metadata",kind:"message",T:()=>ri}])}},rs=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.BackendContext.StaticContext",[{no:1,name:"system",kind:"scalar",T:9},{no:2,name:"service_name",kind:"scalar",T:9}])}},ri=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.BackendContext.SurfaceMetadata",[{no:1,name:"backend_sdk_version",kind:"scalar",T:9}])}},ro=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.DynamicContext",[{no:1,name:"context_definition",kind:"message",repeat:1,T:()=>rl}])}},rl=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.DynamicContext.ContextDefinition",[{no:1,name:"known_context",kind:"enum",oneof:"context",T:()=>["spotify.remote_config.ucs.proto.DynamicContext.KnownContext",h,"KNOWN_CONTEXT_"]}])}};new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.UcsRequest",[{no:1,name:"caller_info",kind:"message",T:()=>ru},{no:2,name:"resolve_request",kind:"message",T:()=>n3},{no:3,name:"account_attributes_request",kind:"message",T:()=>rc}])}};let ru=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.UcsRequest.CallerInfo",[{no:1,name:"request_origin_id",kind:"scalar",T:9},{no:2,name:"request_orgin_version",kind:"scalar",T:9},{no:3,name:"reason",kind:"scalar",T:9}])}},rc=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.UcsRequest.AccountAttributesRequest",[])}},rd=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapper",[{no:1,name:"success",kind:"message",oneof:"result",T:()=>rh},{no:2,name:"error",kind:"message",oneof:"result",T:()=>rp}])}},rh=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapper.UcsResponse",[{no:5,name:"fetch_time_millis",kind:"scalar",T:3,L:2},{no:1,name:"resolve_success",kind:"message",oneof:"resolveResult",T:()=>n6},{no:2,name:"resolve_error",kind:"message",oneof:"resolveResult",T:()=>rp},{no:3,name:"account_attributes_success",kind:"message",oneof:"accountAttributesResult",T:()=>rf},{no:4,name:"account_attributes_error",kind:"message",oneof:"accountAttributesResult",T:()=>rp}])}},rf=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapper.AccountAttributesResponse",[{no:1,name:"account_attributes",kind:"map",K:9,V:{kind:"message",T:()=>nJ}}])}},rp=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapper.Error",[{no:1,name:"error_code",kind:"scalar",T:5},{no:2,name:"error_message",kind:"scalar",T:9},{no:3,name:"log_id",kind:"scalar",opt:!0,T:9}])}},rm=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.BootstrapResponse",[{no:2,name:"ucsResponseV0",kind:"message",T:()=>rg}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();if(2===t)a.ucsResponseV0=rg.internalBinaryRead(e,e.uint32(),n,a.ucsResponseV0);else{let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){e.ucsResponseV0&&rg.internalBinaryWrite(e.ucsResponseV0,t.tag(2,o.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rg=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapperV0",[{no:1,name:"success",kind:"message",oneof:"result",T:()=>r_},{no:2,name:"error",kind:"message",oneof:"result",T:()=>rb}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.result={oneofKind:void 0},void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.result={oneofKind:"success",success:r_.internalBinaryRead(e,e.uint32(),n,a.result.success)};break;case 2:a.result={oneofKind:"error",error:rb.internalBinaryRead(e,e.uint32(),n,a.result.error)};break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){"success"===e.result.oneofKind&&r_.internalBinaryWrite(e.result.success,t.tag(1,o.LengthDelimited).fork(),n).join(),"error"===e.result.oneofKind&&rb.internalBinaryWrite(e.result.error,t.tag(2,o.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},r_=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.UcsResponseWrapperSuccess",[{no:1,name:"customization",kind:"message",T:()=>rd}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();if(1===t)a.customization=rd.internalBinaryRead(e,e.uint32(),n,a.customization);else{let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){e.customization&&rd.internalBinaryWrite(e.customization,t.tag(1,o.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rb=new class e extends nY{constructor(){super("spotify.remote_config.ucs.proto.Error",[{no:1,name:"errorCode",kind:"scalar",T:5},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"logId",kind:"scalar",opt:!0,T:9}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.errorCode=0,t.message="",void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.errorCode=e.int32();break;case 2:a.message=e.string();break;case 3:a.logId=e.string();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){0!==e.errorCode&&t.tag(1,o.Varint).int32(e.errorCode),""!==e.message&&t.tag(2,o.LengthDelimited).string(e.message),void 0!==e.logId&&t.tag(3,o.LengthDelimited).string(e.logId);let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rw=new class e extends nY{constructor(){super("google.protobuf.Any",[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])}pack(e,t){return{typeUrl:this.typeNameToUrl(t.typeName),value:t.toBinary(e)}}unpack(e,t,n){if(!this.contains(e,t))throw Error("Cannot unpack google.protobuf.Any with typeUrl '"+e.typeUrl+"' as "+t.typeName+".");return t.fromBinary(e.value,n)}contains(e,t){return!!e.typeUrl.length&&("string"==typeof t?t:t.typeName)===this.typeUrlToName(e.typeUrl)}internalJsonWrite(e,t){if(""===e.typeUrl)return{};let n=this.typeUrlToName(e.typeUrl),r=nz(t),a=r.typeRegistry?.find(e=>e.typeName===n);if(!a)throw new globalThis.Error("Unable to convert google.protobuf.Any with typeUrl '"+e.typeUrl+"' to JSON. The specified type "+n+" is not available in the type registry.");let s=a.fromBinary(e.value,{readUnknownField:!1}),i=a.internalJsonWrite(s,r);return(n.startsWith("google.protobuf.")||!np(i))&&(i={value:i}),i["@type"]=e.typeUrl,i}internalJsonRead(e,t,n){let r;if(!np(e))throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON "+nf(e)+".");if("string"!=typeof e["@type"]||""==e["@type"])return this.create();let a=this.typeUrlToName(e["@type"]),s=t?.typeRegistry?.find(e=>e.typeName==a);if(!s)throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON. The specified type "+a+" is not available in the type registry.");if(a.startsWith("google.protobuf.")&&e.hasOwnProperty("value"))r=s.fromJson(e.value,t);else{let n=Object.assign({},e);delete n["@type"],r=s.fromJson(n,t)}return void 0===n&&(n=this.create()),n.typeUrl=e["@type"],n.value=s.toBinary(r),n}typeNameToUrl(e){if(!e.length)throw Error("invalid type name: "+e);return"type.googleapis.com/"+e}typeUrlToName(e){if(!e.length)throw Error("invalid type url: "+e);let t=e.lastIndexOf("/"),n=t>0?e.substring(t+1):e;if(!n.length)throw Error("invalid type url: "+e);return n}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.typeUrl="",t.value=new Uint8Array(0),void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.typeUrl=e.string();break;case 2:a.value=e.bytes();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){""!==e.typeUrl&&t.tag(1,o.LengthDelimited).string(e.typeUrl),e.value.length&&t.tag(2,o.LengthDelimited).bytes(e.value);let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}};!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.GENERIC=1]="GENERIC",e[e.ASSOC=2]="ASSOC"}(f||(f={})),!function(e){e[e.UNKNOWN_EXTENSION=0]="UNKNOWN_EXTENSION",e[e.CANVAZ=1]="CANVAZ",e[e.STORYLINES=2]="STORYLINES",e[e.PODCAST_TOPICS=3]="PODCAST_TOPICS",e[e.PODCAST_SEGMENTS=4]="PODCAST_SEGMENTS",e[e.AUDIO_FILES=5]="AUDIO_FILES",e[e.TRACK_DESCRIPTOR=6]="TRACK_DESCRIPTOR",e[e.PODCAST_COUNTER=7]="PODCAST_COUNTER",e[e.ARTIST_V4=8]="ARTIST_V4",e[e.ALBUM_V4=9]="ALBUM_V4",e[e.TRACK_V4=10]="TRACK_V4",e[e.SHOW_V4=11]="SHOW_V4",e[e.EPISODE_V4=12]="EPISODE_V4",e[e.PODCAST_HTML_DESCRIPTION=13]="PODCAST_HTML_DESCRIPTION",e[e.PODCAST_QUOTES=14]="PODCAST_QUOTES",e[e.USER_PROFILE=15]="USER_PROFILE",e[e.CANVAS_V1=16]="CANVAS_V1",e[e.SHOW_V4_BASE=17]="SHOW_V4_BASE",e[e.SHOW_V4_EPISODES_ASSOC=18]="SHOW_V4_EPISODES_ASSOC",e[e.TRACK_DESCRIPTOR_SIGNATURES=19]="TRACK_DESCRIPTOR_SIGNATURES",e[e.PODCAST_AD_SEGMENTS=20]="PODCAST_AD_SEGMENTS",e[e.EPISODE_TRANSCRIPTS=21]="EPISODE_TRANSCRIPTS",e[e.PODCAST_SUBSCRIPTIONS=22]="PODCAST_SUBSCRIPTIONS",e[e.EXTRACTED_COLOR=23]="EXTRACTED_COLOR",e[e.PODCAST_VIRALITY=24]="PODCAST_VIRALITY",e[e.IMAGE_SPARKLES_HACK=25]="IMAGE_SPARKLES_HACK",e[e.PODCAST_POPULARITY_HACK=26]="PODCAST_POPULARITY_HACK",e[e.AUTOMIX_MODE=27]="AUTOMIX_MODE",e[e.CUEPOINTS=28]="CUEPOINTS",e[e.PODCAST_POLL=29]="PODCAST_POLL",e[e.EPISODE_ACCESS=30]="EPISODE_ACCESS",e[e.SHOW_ACCESS=31]="SHOW_ACCESS",e[e.PODCAST_QNA=32]="PODCAST_QNA",e[e.CLIPS=33]="CLIPS",e[e.SHOW_V5=34]="SHOW_V5",e[e.EPISODE_V5=35]="EPISODE_V5",e[e.PODCAST_CTA_CARDS=36]="PODCAST_CTA_CARDS",e[e.PODCAST_RATING=37]="PODCAST_RATING",e[e.DISPLAY_SEGMENTS=38]="DISPLAY_SEGMENTS",e[e.GREENROOM=39]="GREENROOM",e[e.USER_CREATED=40]="USER_CREATED",e[e.SHOW_DESCRIPTION=41]="SHOW_DESCRIPTION",e[e.SHOW_HTML_DESCRIPTION=42]="SHOW_HTML_DESCRIPTION",e[e.SHOW_PLAYABILITY=43]="SHOW_PLAYABILITY",e[e.EPISODE_DESCRIPTION=44]="EPISODE_DESCRIPTION",e[e.EPISODE_HTML_DESCRIPTION=45]="EPISODE_HTML_DESCRIPTION",e[e.EPISODE_PLAYABILITY=46]="EPISODE_PLAYABILITY",e[e.SHOW_EPISODES_ASSOC=47]="SHOW_EPISODES_ASSOC",e[e.CLIENT_CONFIG=48]="CLIENT_CONFIG",e[e.PLAYLISTABILITY=49]="PLAYLISTABILITY",e[e.AUDIOBOOK_V5=50]="AUDIOBOOK_V5",e[e.CHAPTER_V5=51]="CHAPTER_V5",e[e.AUDIOBOOK_SPECIFICS=52]="AUDIOBOOK_SPECIFICS",e[e.EPISODE_RANKING=53]="EPISODE_RANKING",e[e.HTML_DESCRIPTION=54]="HTML_DESCRIPTION",e[e.CREATOR_CHANNEL=55]="CREATOR_CHANNEL",e[e.AUDIOBOOK_PROVIDERS=56]="AUDIOBOOK_PROVIDERS",e[e.PLAY_TRAIT=57]="PLAY_TRAIT",e[e.CONTENT_WARNING=58]="CONTENT_WARNING",e[e.IMAGE_CUE=59]="IMAGE_CUE",e[e.STREAM_COUNT=60]="STREAM_COUNT",e[e.AUDIO_ATTRIBUTES=61]="AUDIO_ATTRIBUTES",e[e.NAVIGABLE_TRAIT=62]="NAVIGABLE_TRAIT",e[e.NEXT_BEST_EPISODE=63]="NEXT_BEST_EPISODE",e[e.AUDIOBOOK_PRICE=64]="AUDIOBOOK_PRICE",e[e.EXPRESSIVE_PLAYLISTS=65]="EXPRESSIVE_PLAYLISTS",e[e.DYNAMIC_SHOW_EPISODE=66]="DYNAMIC_SHOW_EPISODE",e[e.LIVE=67]="LIVE",e[e.SKIP_PLAYED=68]="SKIP_PLAYED",e[e.AD_BREAK_FREE_PODCASTS=69]="AD_BREAK_FREE_PODCASTS",e[e.ASSOCIATIONS=70]="ASSOCIATIONS",e[e.PLAYLIST_EVALUATION=71]="PLAYLIST_EVALUATION",e[e.CACHE_INVALIDATIONS=72]="CACHE_INVALIDATIONS",e[e.LIVESTREAM_ENTITY=73]="LIVESTREAM_ENTITY",e[e.SINGLE_TAP_REACTIONS=74]="SINGLE_TAP_REACTIONS",e[e.USER_COMMENTS=75]="USER_COMMENTS",e[e.CLIENT_RESTRICTIONS=76]="CLIENT_RESTRICTIONS",e[e.PODCAST_GUEST=77]="PODCAST_GUEST",e[e.PLAYABILITY=78]="PLAYABILITY",e[e.COVER_IMAGE=79]="COVER_IMAGE",e[e.SHARE_TRAIT=80]="SHARE_TRAIT",e[e.INSTANCE_SHARING=81]="INSTANCE_SHARING",e[e.ARTIST_TOUR=82]="ARTIST_TOUR",e[e.AUDIOBOOK_GENRE=83]="AUDIOBOOK_GENRE",e[e.CONCEPT=84]="CONCEPT",e[e.ORIGINAL_VIDEO=85]="ORIGINAL_VIDEO",e[e.SMART_SHUFFLE=86]="SMART_SHUFFLE",e[e.LIVE_EVENTS=87]="LIVE_EVENTS",e[e.AUDIOBOOK_RELATIONS=88]="AUDIOBOOK_RELATIONS",e[e.HOME_POC_BASECARD=89]="HOME_POC_BASECARD",e[e.AUDIOBOOK_SUPPLEMENTS=90]="AUDIOBOOK_SUPPLEMENTS",e[e.PAID_PODCAST_BANNER=91]="PAID_PODCAST_BANNER",e[e.FEWER_ADS=92]="FEWER_ADS",e[e.WATCH_FEED_SHOW_EXPLORER=93]="WATCH_FEED_SHOW_EXPLORER",e[e.TRACK_EXTRA_DESCRIPTORS=94]="TRACK_EXTRA_DESCRIPTORS",e[e.TRACK_EXTRA_AUDIO_ATTRIBUTES=95]="TRACK_EXTRA_AUDIO_ATTRIBUTES",e[e.TRACK_EXTENDED_CREDITS=96]="TRACK_EXTENDED_CREDITS",e[e.SIMPLE_TRAIT=97]="SIMPLE_TRAIT",e[e.AUDIO_ASSOCIATIONS=98]="AUDIO_ASSOCIATIONS",e[e.VIDEO_ASSOCIATIONS=99]="VIDEO_ASSOCIATIONS",e[e.PLAYLIST_TUNER=100]="PLAYLIST_TUNER",e[e.ARTIST_VIDEOS_ENTRYPOINT=101]="ARTIST_VIDEOS_ENTRYPOINT",e[e.PRERELEASE=102]="PRERELEASE",e[e.CONTENT_ALTERNATIVES=103]="CONTENT_ALTERNATIVES",e[e.SNAPSHOT_SHARING=105]="SNAPSHOT_SHARING"}(p||(p={}));new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.BatchedEntityRequest",[{no:1,name:"header",kind:"message",T:()=>ry},{no:2,name:"request",kind:"message",repeat:1,T:()=>rT}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.request=[],void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.header=ry.internalBinaryRead(e,e.uint32(),n,a.header);break;case 2:a.request.push(rT.internalBinaryRead(e,e.uint32(),n));break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){e.header&&ry.internalBinaryWrite(e.header,t.tag(1,o.LengthDelimited).fork(),n).join();for(let r=0;r<e.request.length;r++)rT.internalBinaryWrite(e.request[r],t.tag(2,o.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}};let ry=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.BatchedEntityRequestHeader",[{no:1,name:"country",kind:"scalar",T:9},{no:2,name:"catalogue",kind:"scalar",T:9},{no:3,name:"task_id",kind:"scalar",T:12}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.country="",t.catalogue="",t.taskId=new Uint8Array(0),void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.country=e.string();break;case 2:a.catalogue=e.string();break;case 3:a.taskId=e.bytes();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){""!==e.country&&t.tag(1,o.LengthDelimited).string(e.country),""!==e.catalogue&&t.tag(2,o.LengthDelimited).string(e.catalogue),e.taskId.length&&t.tag(3,o.LengthDelimited).bytes(e.taskId);let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rT=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.EntityRequest",[{no:1,name:"uri",kind:"scalar",T:9},{no:2,name:"query",kind:"message",repeat:1,T:()=>rk}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.uri="",t.query=[],void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.uri=e.string();break;case 2:a.query.push(rk.internalBinaryRead(e,e.uint32(),n));break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){""!==e.uri&&t.tag(1,o.LengthDelimited).string(e.uri);for(let r=0;r<e.query.length;r++)rk.internalBinaryWrite(e.query[r],t.tag(2,o.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rk=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.ExtensionQuery",[{no:1,name:"kind",kind:"enum",T:()=>["com.spotify.extendedmetadata.proto.ExtensionKind",p]},{no:2,name:"etag",kind:"scalar",opt:!0,T:9}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.kind=0,void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.kind=e.int32();break;case 2:a.etag=e.string();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){0!==e.kind&&t.tag(1,o.Varint).int32(e.kind),void 0!==e.etag&&t.tag(2,o.LengthDelimited).string(e.etag);let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rS=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.BatchedExtensionResponse",[{no:1,name:"header",kind:"message",T:()=>rE},{no:2,name:"extended_metadata",kind:"message",repeat:1,T:()=>rI}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.extendedMetadata=[],void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.header=rE.internalBinaryRead(e,e.uint32(),n,a.header);break;case 2:a.extendedMetadata.push(rI.internalBinaryRead(e,e.uint32(),n));break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){e.header&&rE.internalBinaryWrite(e.header,t.tag(1,o.LengthDelimited).fork(),n).join();for(let r=0;r<e.extendedMetadata.length;r++)rI.internalBinaryWrite(e.extendedMetadata[r],t.tag(2,o.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rE=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.BatchedExtensionResponseHeader",[])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){return r??this.create()}internalBinaryWrite(e,t,n){let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rI=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.EntityExtensionDataArray",[{no:1,name:"header",kind:"message",T:()=>rv},{no:2,name:"kind",kind:"enum",T:()=>["com.spotify.extendedmetadata.proto.ExtensionKind",p]},{no:3,name:"extension_data",kind:"message",repeat:1,T:()=>rN}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.kind=0,t.extensionData=[],void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.header=rv.internalBinaryRead(e,e.uint32(),n,a.header);break;case 2:a.kind=e.int32();break;case 3:a.extensionData.push(rN.internalBinaryRead(e,e.uint32(),n));break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){e.header&&rv.internalBinaryWrite(e.header,t.tag(1,o.LengthDelimited).fork(),n).join(),0!==e.kind&&t.tag(2,o.Varint).int32(e.kind);for(let r=0;r<e.extensionData.length;r++)rN.internalBinaryWrite(e.extensionData[r],t.tag(3,o.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rv=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.EntityExtensionDataArrayHeader",[{no:1,name:"provider_error_status",kind:"scalar",T:5},{no:2,name:"cache_ttl_in_seconds",kind:"scalar",T:3,L:2},{no:3,name:"offline_ttl_in_seconds",kind:"scalar",T:3,L:2},{no:4,name:"extension_type",kind:"enum",T:()=>["com.spotify.extendedmetadata.proto.ExtensionType",f]}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.providerErrorStatus=0,t.cacheTtlInSeconds=0,t.offlineTtlInSeconds=0,t.extensionType=0,void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.providerErrorStatus=e.int32();break;case 2:a.cacheTtlInSeconds=e.int64().toNumber();break;case 3:a.offlineTtlInSeconds=e.int64().toNumber();break;case 4:a.extensionType=e.int32();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){0!==e.providerErrorStatus&&t.tag(1,o.Varint).int32(e.providerErrorStatus),0!==e.cacheTtlInSeconds&&t.tag(2,o.Varint).int64(e.cacheTtlInSeconds),0!==e.offlineTtlInSeconds&&t.tag(3,o.Varint).int64(e.offlineTtlInSeconds),0!==e.extensionType&&t.tag(4,o.Varint).int32(e.extensionType);let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rN=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.EntityExtensionData",[{no:1,name:"header",kind:"message",T:()=>rA},{no:2,name:"entity_uri",kind:"scalar",T:9},{no:3,name:"extension_data",kind:"message",T:()=>rw}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.entityUri="",void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.header=rA.internalBinaryRead(e,e.uint32(),n,a.header);break;case 2:a.entityUri=e.string();break;case 3:a.extensionData=rw.internalBinaryRead(e,e.uint32(),n,a.extensionData);break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){e.header&&rA.internalBinaryWrite(e.header,t.tag(1,o.LengthDelimited).fork(),n).join(),""!==e.entityUri&&t.tag(2,o.LengthDelimited).string(e.entityUri),e.extensionData&&rw.internalBinaryWrite(e.extensionData,t.tag(3,o.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rA=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.EntityExtensionDataHeader",[{no:1,name:"status_code",kind:"scalar",T:5},{no:2,name:"etag",kind:"scalar",T:9},{no:3,name:"locale",kind:"scalar",T:9},{no:4,name:"cache_ttl_in_seconds",kind:"scalar",T:3,L:2},{no:5,name:"offline_ttl_in_seconds",kind:"scalar",T:3,L:2}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.statusCode=0,t.etag="",t.locale="",t.cacheTtlInSeconds=0,t.offlineTtlInSeconds=0,void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.statusCode=e.int32();break;case 2:a.etag=e.string();break;case 3:a.locale=e.string();break;case 4:a.cacheTtlInSeconds=e.int64().toNumber();break;case 5:a.offlineTtlInSeconds=e.int64().toNumber();break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){0!==e.statusCode&&t.tag(1,o.Varint).int32(e.statusCode),""!==e.etag&&t.tag(2,o.LengthDelimited).string(e.etag),""!==e.locale&&t.tag(3,o.LengthDelimited).string(e.locale),0!==e.cacheTtlInSeconds&&t.tag(4,o.Varint).int64(e.cacheTtlInSeconds),0!==e.offlineTtlInSeconds&&t.tag(5,o.Varint).int64(e.offlineTtlInSeconds);let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rO=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.PlainListAssoc",[{no:1,name:"entity_uri",kind:"scalar",repeat:2,T:9}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return t.entityUri=[],void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();if(1===t)a.entityUri.push(e.string());else{let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){for(let n=0;n<e.entityUri.length;n++)t.tag(1,o.LengthDelimited).string(e.entityUri[n]);let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}},rR=new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.AssocHeader",[])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){return r??this.create()}internalBinaryWrite(e,t,n){let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}};new class e extends nY{constructor(){super("com.spotify.extendedmetadata.proto.Assoc",[{no:1,name:"header",kind:"message",T:()=>rR},{no:2,name:"plain_list",kind:"message",T:()=>rO}])}create(e){let t=globalThis.Object.create(this.messagePrototype);return void 0!==e&&nl(this,t,e),t}internalBinaryRead(e,t,n,r){let a=r??this.create(),s=e.pos+t;for(;e.pos<s;){let[t,r]=e.tag();switch(t){case 1:a.header=rR.internalBinaryRead(e,e.uint32(),n,a.header);break;case 2:a.plainList=rO.internalBinaryRead(e,e.uint32(),n,a.plainList);break;default:let s=n.readUnknownField;if("throw"===s)throw new globalThis.Error(`Unknown field ${t} (wire type ${r}) for ${this.typeName}`);let o=e.skip(r);!1!==s&&(!0===s?i.onRead:s)(this.typeName,a,t,r,o)}}return a}internalBinaryWrite(e,t,n){e.header&&rR.internalBinaryWrite(e.header,t.tag(1,o.LengthDelimited).fork(),n).join(),e.plainList&&rO.internalBinaryWrite(e.plainList,t.tag(2,o.LengthDelimited).fork(),n).join();let r=n.writeUnknownFields;return!1!==r&&(!0==r?i.onWrite:r)(this.typeName,e,t),t}};let rx=new URL($request.url);w.info(`url: ${rx.toJSON()}`);let rD=rx.pathname;w.info(`PATH: ${rD}`);let rU=($response.headers?.["Content-Type"]??$response.headers?.["content-type"])?.split(";")?.[0];w.info(`FORMAT: ${rU}`),(async()=>{let{Settings:e,Caches:t,Configs:n}=function(e,t,n){w.log("☑️ Set Environment Variables");let{Settings:r,Caches:a,Configs:s}=function(e,t,n){t=[t].flat(Number.POSITIVE_INFINITY);let r={Settings:n?.Default?.Settings||{},Configs:n?.Default?.Configs||{},Caches:{}};switch(t.forEach(e=>{r.Settings={...r.Settings,...n?.[e]?.Settings},r.Configs={...r.Configs,...n?.[e]?.Configs}}),typeof $argument){case"string":$argument=Object.fromEntries($argument.split("&").map(e=>e.split("=",2).map(e=>e.replace(/\"/g,""))));case"object":{let e={};Object.keys($argument).forEach(t=>y.set(e,t,$argument[t])),r.Settings={...r.Settings,...e}}}let a=S.getItem(e);return a&&t.forEach(e=>{switch(typeof a?.[e]?.Settings){case"string":a[e].Settings=JSON.parse(a[e].Settings||"{}");case"object":r.Settings={...r.Settings,...a[e].Settings}}switch(typeof a?.[e]?.Caches){case"string":a[e].Caches=JSON.parse(a[e].Caches||"{}");case"object":r.Caches={...r.Caches,...a[e].Caches}}}),function e(t,n){for(let r in t){let a=t[r];t[r]="object"==typeof a&&null!==a?e(a,n):n(r,a)}return t}(r.Settings,(e,t)=>("true"===t||"false"===t?t=JSON.parse(t):"string"==typeof t&&(t=t.includes(",")?t.split(",").map(e=>na(e)):na(t)),t)),r}(e,t,n);return!Array.isArray(r?.Types)&&(r.Types=r.Types?[r.Types]:[]),w.debug(`typeof Settings: ${typeof r}`,`Settings: ${JSON.stringify(r)}`),("object"!=typeof a?.Playlists||Array.isArray(a?.Playlists))&&(a.Playlists={}),a.Playlists.Master=new Map(JSON.parse(a?.Playlists?.Master||"[]")),a.Playlists.Subtitle=new Map(JSON.parse(a?.Playlists?.Subtitle||"[]")),"object"!=typeof a?.Subtitles&&(a.Subtitles=new Map(JSON.parse(a?.Subtitles||"[]"))),("object"!=typeof a?.Metadatas||Array.isArray(a?.Metadatas))&&(a.Metadatas={}),"object"!=typeof a?.Metadatas?.Tracks&&(a.Metadatas.Tracks=new Map(JSON.parse(a?.Metadatas?.Tracks||"[]"))),w.log("✅ Set Environment Variables"),{Settings:r,Caches:a,Configs:s}}("DualSubs","Spotify",ns),r=rx.searchParams.get("subtype")??e.Type,a=[rx.searchParams.get("lang")?.toUpperCase?.()??e.Languages[0],(rx.searchParams.get("tlang")??t?.tlang)?.toUpperCase?.()??e.Languages[1]];w.info(`Type: ${r}`,`Languages: ${a}`);let s={};switch(rU){case void 0:case"application/x-www-form-urlencoded":case"text/plain":default:case"application/x-mpegURL":case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"audio/mpegurl":case"text/xml":case"text/html":case"text/plist":case"application/xml":case"application/plist":case"application/x-plist":case"text/vtt":case"application/vtt":break;case"text/json":case"application/json":switch(s=JSON.parse($response.body??"{}"),w.debug(`body: ${JSON.stringify(s)}`),rD){case"/melody/v1/product_state":s.country=e.Country,s["selected-language"]=e.Languages[1].toLowerCase();break;case"/v1/tracks":s?.tracks?.forEach?.(e=>{w.debug(`track: ${JSON.stringify(e)}`);let n=e?.id,r={track:e?.name,album:e?.album?.name,artist:e?.artists?.[0]?.name};t.Metadatas.Tracks.set(n,r)}),t.Metadatas.Tracks=function(e,t=100){return w.log("☑️ Set Cache",`cacheSize: ${t}`),e=(e=Array.from(e||[])).slice(-t),w.log("✅ Set Cache"),e}(t.Metadatas.Tracks,e.CacheSize),S.setItem("@DualSubs.Spotify.Caches.Metadatas.Tracks",t.Metadatas.Tracks)}$response.body=JSON.stringify(s);break;case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":case"application/grpc":case"application/grpc+proto":case"application/octet-stream":{let t="Quantumult X"===b?new Uint8Array($response.bodyBytes??[]):$response.body??new Uint8Array;switch(rU){case"application/protobuf":case"application/x-protobuf":case"application/vnd.google.protobuf":switch(rD){case"/bootstrap/v1/bootstrap":case"/user-customization-service/v1/customize":switch(rD){case"/bootstrap/v1/bootstrap":{s=rm.fromBinary(t);let n=s?.ucsResponseV0?.result?.success?.customization?.result?.success?.resolveResult?.resolveSuccess?.configuration?.assignedValues;n&&(n=ni(n));let r=s?.ucsResponseV0?.result?.success?.customization?.result?.success?.accountAttributesResult?.accountAttributesSuccess?.accountAttributes;r&&(r.country_code={value:{oneofKind:"stringValue",stringValue:e.CountryCode}},r=no(r)),t=rm.toBinary(s);break}case"/user-customization-service/v1/customize":{s=rd.fromBinary(t);let n=s?.result?.success?.resolveResult?.resolveSuccess?.configuration?.assignedValues;n&&(n=ni(n));let r=s?.result?.success?.accountAttributesResult?.accountAttributesSuccess?.accountAttributes;r&&(r.country_code={value:{oneofKind:"stringValue",stringValue:e.CountryCode}},r=no(r)),t=rd.toBinary(s)}}break;case"/extended-metadata/v0/extended-metadata":s=rS.fromBinary(t),t=rS.toBinary(s)}}$response.body=t}}})().catch(e=>w.error(e)).finally(()=>(function(e={}){switch(b){case"Surge":e.policy&&y.set(e,"headers.X-Surge-Policy",e.policy),w.log("\uD83D\uDEA9 执行结束!",`🕛 ${new Date().getTime()/1e3-$script.startTime} 秒`),$done(e);break;case"Loon":e.policy&&(e.node=e.policy),w.log("\uD83D\uDEA9 执行结束!",`🕛 ${(new Date-$script.startTime)/1e3} 秒`),$done(e);break;case"Stash":e.policy&&y.set(e,"headers.X-Stash-Selected-Proxy",encodeURI(e.policy)),w.log("\uD83D\uDEA9 执行结束!",`🕛 ${(new Date-$script.startTime)/1e3} 秒`),$done(e);break;case"Egern":case"Shadowrocket":default:w.log("\uD83D\uDEA9 执行结束!"),$done(e);break;case"Quantumult X":switch(e.policy&&y.set(e,"opts.policy",e.policy),e["auto-redirect"]=void 0,e["auto-cookie"]=void 0,e["binary-mode"]=void 0,e.charset=void 0,e.host=void 0,e.insecure=void 0,e.method=void 0,e.ok=void 0,e.opt=void 0,e.path=void 0,e.policy=void 0,e["policy-descriptor"]=void 0,e.scheme=void 0,e.sessionIndex=void 0,e.statusCode=void 0,e.timeout=void 0,typeof e.status){case"number":e.status=T[e.status];break;case"string":case"undefined":break;default:e.status=void 0}e.body instanceof ArrayBuffer?(e.bodyBytes=e.body,e.body=void 0):ArrayBuffer.isView(e.body)?(e.bodyBytes=e.body.buffer.slice(e.body.byteOffset,e.body.byteLength+e.body.byteOffset),e.body=void 0):e.body&&(e.bodyBytes=void 0),w.log("\uD83D\uDEA9 执行结束!"),$done(e);break;case"Node.js":w.log("\uD83D\uDEA9 执行结束!"),process.exit(1)}})($response))})();